 /**
 * Jeeliz AR - https://github.com/jeeliz/jeelizAR
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEEARAPI=(function(){function ja(a,c,d){var f=new XMLHttpRequest;f.open("GET",a,!0);f.withCredentials=!1;f.onreadystatechange=function(){4===f.readyState&&(200===f.status?c(f.responseText):"undefined"!==typeof d&&d(f.status))};f.send()}
function ka(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function na(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}
function qa(a){var c=JSON.parse(a);a=c.ne;var d=c.nf,f=c.n,h="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data),e=h.length,l;c=new Uint8Array(e);for(l=0;l<e;++l)c[l]=h.charCodeAt(l);h=new Float32Array(f);e=new Float32Array(d);l=a+d+1;var k,q;for(k=0;k<f;++k){var g=l*k;var r=0===na(c,g)?1:-1;var v=g+1;var t=1,A=0;for(q=v+a-1;q>=v;--q)A+=t*na(c,q),t*=2;q=A;v=c;t=g+1+a;A=e;var F=0,E=A.length;for(g=t;g<t+E;++g)A[F]=na(v,g),++F;for(g=v=0;g<d;++g)v+=e[g]*Math.pow(2,-g-
1);r=0===v&&0===q?0:r*(1+v)*Math.pow(2,1+q-Math.pow(2,a-1));h[k]=r}return h}
var m=function(){function a(a,c){a=b.createShader(a);b.shaderSource(a,c);b.compileShader(a);return b.getShaderParameter(a,b.COMPILE_STATUS)?a:!1}function c(z,c){z=a(b.VERTEX_SHADER,z);c=a(b.FRAGMENT_SHADER,c);var d=b.createProgram();b.attachShader(d,z);b.attachShader(d,c);b.linkProgram(d);return d}function d(a){void 0===a.ea&&(a.ea="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===a.Z&&(a.Z=["a0"]);void 0===a.T&&(a.T=
[2]);if(void 0===a.precision||"highp"===a.precision)a.precision=q;a.id=l++;void 0!==a.gc&&a.gc.forEach(function(c,d){a.c=a.c.replace(c,a.la[d])});a.Ka=0;a.T.forEach(function(c){a.Ka+=4*c});a.ka=c(a.ea,"precision "+a.precision+" float;\n"+a.c);a.o={};a.f.forEach(function(c){a.o[c]=b.getUniformLocation(a.ka,c)});a.attributes={};a.$=[];a.Z.forEach(function(c){var d=b.getAttribLocation(a.ka,c);a.attributes[c]=d;a.$.push(d)});if(a.g){b.useProgram(a.ka);e=a;h=a.id;for(var d in a.g)b.uniform1i(a.o[d],a.g[d])}a.Uc=
!0}function f(a){sa.lc(u);h!==a.id&&(u.S(),h=a.id,e=a,b.useProgram(a.ka),a.$.forEach(function(a){0!==a&&b.enableVertexAttribArray(a)}))}var h=-1,e=!1,l=0,k=!1,q="highp",g=["u1"],r=["u0"],v={u1:0},t={u0:0},A={u1:0,u2:1},F={u3:0},E={s0:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:g,g:v},s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:g,g:v,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
f:["u1","u2"],g:A},s3:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:g,g:v},s4:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",f:["u1","mask"],g:A},s5:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:g,g:v},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
f:g,g:v},s7:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],g:t},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",f:["u0","u4"],g:t},s9:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
f:g,g:v},s10:{c:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",f:["u1","u5","u6"],g:{u1:0,u5:1}},s11:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",f:["u1","u7"],g:v},s12:{c:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
f:["u1","u8"],g:v},s13:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:r,g:t},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",f:r,g:t},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",f:r,g:t},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
f:r,g:t},s17:{c:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u6","u9"],g:{u0:0,u6:1,u9:2}},s18:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",f:r,g:t},s19:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
f:r,g:t},s20:{c:"uniform sampler2D u0;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=exp(a);}",f:["u0","u10"],g:t},s21:{c:"uniform sampler2D u0,u11;uniform float u12;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,f);float b=u12*u12;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u13","u12"],g:{u0:0,u13:1}},s22:{c:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),g=floor(u14.x*fract(b*u14.y)),f=(g*u14.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
f:["u1","u14"],g:v},s23:{c:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),e=texture2D(u16,c);gl_FragColor=d*e;}",f:["u15","u16","u17"],g:{u16:0,u15:1,u17:2}},s24:{c:"uniform float u18;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 a=fract(vv0*u18);vec4 b=texture2D(u15,vv0),c=texture2D(u16,a);gl_FragColor=b*c;}",f:["u16","u15","u18"],g:{u16:0,u15:1}},s25:{c:"uniform float u18;uniform sampler2D u15,u16,u19,u20,u21,u22;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u18,m=floor(i),c=i-m;vec4 n=texture2D(u15,vv0),d=texture2D(u16,c),a=texture2D(u22,vv0);a=a*255.;vec4 o=texture2D(u19,c),p=texture2D(u20,c),q=texture2D(u21,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
f:"u15 u16 u18 u22 u19 u20 u21".split(" "),g:{u16:0,u15:1,u22:3,u19:4,u20:5,u21:6}},s26:{c:"uniform sampler2D u15,u16,u23;uniform float u18,u24,u25,u26;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u24*vv0),g=u24*vv0-a;float b=u18/u24;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u24;float l=u24*u26/u18;vec2 m=l*c,i=(m+d*u25)/u26,e=step(i,j);vec4 n=texture2D(u15,h),o=texture2D(u16,i),p=n*o*e.x*e.y,k=texture2D(u23,h);gl_FragColor=p*u25*u25+k;}",f:"u15 u16 u18 u24 u25 u26 u23".split(" "),g:{u16:0,
u15:1,u23:2}},s27:{c:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",f:["u15","u16"],g:{u16:0,u15:1}},s28:{c:"uniform sampler2D u1,u23;uniform float u27;varying vec2 vv0;void main(){gl_FragColor=texture2D(u23,vv0)+u27*texture2D(u1,vv0);}",f:["u1","u23","u27"],g:{u1:0,u23:1}},s29:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
f:g,g:v,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
f:["u1","u2","u28"],g:A},s31:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u28,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u1,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,c).r-i/g)*j;}",f:["u1","u2","u28"],g:A},s32:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
f:["u3","u7"],g:F},s33:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u7"],g:F},s34:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
f:["u1"],g:v,precision:"lowp"},s35:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",f:["u7","u1"],g:v,precision:"lowp"},s36:{c:"uniform sampler2D u1,u29,u30;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u29,vv0),b=texture2D(u30,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
f:["u1","u29","u30"],g:{u1:0,u29:1,u30:2}}},G={s37:{c:"uniform float u18,u31;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 o=vec2(0.,0.),h=vec2(1.,1.),i=vec2(.5,.5),m=vec2(.01,.01);void main(){vec4 j=texture2D(u23,vv0);float f=1.1111;vec2 a,l,b=o,c=m/u18,k=floor(vv0*u18+c);float p=f*u18;vec2 n=h*(f-1.)/2.;for(float d=0.;d<1.1111;d+=1.){b.x=d;for(float e=0.;e<1.1111;e+=1.)b.y=e,a=(k+i+u31*(b-n))/u18,a+=step(a,-c),a-=step(h-c,a),l=(k*f+b+i)/p,j+=texture2D(u15,l)*texture2D(u16,a);}gl_FragColor=j,gl_FragColor*=2.2222;}",
f:["u18","u15","u16","u23","u31"],la:["1.1111","gl_FragColor\\*=2.2222;"]},s38:{c:"uniform float u18,u31,u26;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 m=vec2(0.,0.),j=vec2(1.,1.),n=vec2(.5,.5),u=vec2(.01,.01);void main(){vec4 p=texture2D(u23,vv0);float q=1.1111,i=3.3333;vec2 a,s,t,r,b=m,c=m,d=u/u26,o=floor(vv0*u18+d);float k=q*u26;vec2 v=j*(q-1.)/2.;float w=k/u18;vec2 x=o*i;for(float g=0.;g<1.1111;g+=1.){b.x=g;for(float f=0.;f<1.1111;f+=1.){b.y=f;for(float h=0.;h<3.3333;h+=1.){c.x=h;for(float e=0.;e<3.3333;e+=1.)c.y=e,t=x+c+i*u31*(b-v),a=(t+n)/u26,a+=step(a,-d),a-=step(j-d,a),r=b*i+c,s=(o*w+r+n)/k,p+=texture2D(u15,s)*texture2D(u16,a);}}}gl_FragColor=p,gl_FragColor*=2.2222;}",
f:"u18 u26 u15 u16 u23 u31".split(" "),la:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},u={Ba:function(){return k},m:function(){if(!k){q="highp";for(var a in E)d(E[a],a);m.set("s0");b.enableVertexAttribArray(0);a=ua.m();k=!0;return a}},nb:function(a){a.forEach(function(a){u.mb(a)})},mb:function(a){E[a.id]=a;d(a,a.id)},Wa:function(a,c,q){c||(c=a);E[c]=Object.create(G[a]);G[a].la&&G[a].la.forEach(function(a,d){E[c].c=E[c].c.replace(new RegExp(a,"g"),q[d])});d(E[c],c)},set:function(a){f(E[a])},Fb:function(a){return"undefined"!==
typeof E[a]},Hc:function(){return e.Ec},S:function(){-1!==h&&(h=-1,e.$.forEach(function(a){0!==a&&b.disableVertexAttribArray(a)}))},Fa:function(){var a=0;e.$.forEach(function(c,d){d=e.T[d];b.vertexAttribPointer(c,d,b.FLOAT,!1,e.Ka,a);a+=4*d})},Dc:function(){b.enableVertexAttribArray(0)},Ga:function(){b.vertexAttribPointer(e.$[0],2,b.FLOAT,!1,8,0)},gd:function(a,c){b.uniform1i(e.o[a],c)},G:function(a,c){b.uniform1f(e.o[a],c)},L:function(a,c,d){b.uniform2f(e.o[a],c,d)},hd:function(a,c){b.uniform2fv(e.o[a],
c)},kd:function(a,c){b.uniform3fv(e.o[a],c)},jd:function(a,c,d,q){b.uniform3f(e.o[a],c,d,q)},ma:function(a,c){b.uniform4fv(e.o[a],c)},ld:function(a,c){b.uniformMatrix2fv(e.o[a],!1,c)},md:function(a,c){b.uniformMatrix3fv(e.o[a],!1,c)},nd:function(a,c){b.uniformMatrix4fv(e.o[a],!1,c)},I:function(a,c){u.set(a);c.forEach(function(a){switch(a.type){case "4f":b.uniform4fv(e.o[a.name],a.value);break;case "3f":b.uniform3fv(e.o[a.name],a.value);break;case "2f":b.uniform2fv(e.o[a.name],a.value);break;case "1f":b.uniform1f(e.o[a.name],
a.value);break;case "1i":b.uniform1i(e.o[a.name],a.value);break;case "mat2":b.uniformMatrix2fv(e.o[a.name],!1,a.value);break;case "mat3":b.uniformMatrix3fv(e.o[a.name],!1,a.value);break;case "mat4":b.uniformMatrix4fv(e.o[a.name],!1,a.value)}})}};return u}(),b,va=function(){function a(a){console.log("ERROR in ContextFeedForward : ",a);return!1}var c=!1,d=!1,f=!1,h=!1,e=!0,l=!1,k={v:function(){return c.width},K:function(){return c.height},Ic:function(){return c},Gc:function(){return b},s:function(){return e},
flush:function(){b.flush()},Jb:function(){l||(l=new Uint8Array(c.width*c.height*4));b.readPixels(0,0,c.width,c.height,b.RGBA,b.UNSIGNED_BYTE,l);return l},Kc:function(){return c.toDataURL("image/jpeg")},Lc:function(){B.H();d||(d=document.createElement("canvas"),f=d.getContext("2d"));d.width=c.width;d.height=c.height;var a=k.Jb(),e=f.createImageData(d.width,d.height),h,l,t=d.width,A=d.height,F=e.data;for(l=0;l<A;++l){var E=A-l-1;for(h=0;h<t;++h){var G=4*(l*t+h);var u=4*(E*t+h);F[G]=a[u];F[G+1]=a[u+
1];F[G+2]=a[u+2];F[G+3]=a[u+3]}}f.putImageData(e,0,0);return d.toDataURL("image/png")},Jc:function(a){!d&&a&&(d=document.createElement("canvas"),f=d.getContext("2d"));var e=a?d:document.createElement("canvas");e.width=c.width;e.height=c.height;(a?f:e.getContext("2d")).drawImage(c,0,0);return e},m:function(d){d.xb&&!d.aa?c=document.getElementById(d.xb):d.aa&&(c=d.aa);c||(c=document.createElement("canvas"));c.width=d&&void 0!==d.width?d.width:512;c.height=d&&void 0!==d.height?d.height:512;"undefined"===
typeof d&&(d={});void 0===d.premultipliedAlpha&&(d.premultipliedAlpha=!1);void 0===d.Ya&&(d.Ya=!0);void 0===d.antialias&&(d.antialias=!1);var f={antialias:d.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:d.premultipliedAlpha,stencil:!1,depth:d.Ya};(b=c.getContext("webgl2",f))?e=!0:((b=c.getContext("webgl",f))||(b=c.getContext("experimental-webgl",f)),e=!1);if(!b)return a("WebGL is not enabled");(h=b.getExtension("WEBGL_lose_context"))&&c.addEventListener("webglcontextlost",d.cc,!1);
if(!C.m())return a("Not enough capabilities");if(!C.sb()&&e)return a("Your configuration cannot process color buffer float");b.clearColor(0,0,0,0);b.disable(b.DEPTH_TEST);b.disable(b.BLEND);b.disable(b.DITHER);b.disable(b.STENCIL_TEST);b.GENERATE_MIPMAP_HINT&&b.hint(b.GENERATE_MIPMAP_HINT,b.FASTEST);b.disable(b.SAMPLE_ALPHA_TO_COVERAGE);b.disable(b.SAMPLE_COVERAGE);return!0},Sb:function(){if(!m.m())return!1;b.depthFunc(b.LEQUAL);b.clearDepth(1);return!0}};return k}(),sa=function(){var a="undefined"===
typeof m?JEShaders:m;return{lc:function(c){a!==c&&(a.S(),a=c)},Ba:function(){return a.Ba()},Ga:function(){a.Ga()},Fa:function(){a.Fa()},S:function(){a.S()},set:function(c){a.set(c)}}}(),H=function(){var a,c,d=0,f=-2,h=-2,e=!1,l={reset:function(){h=f=-2},m:function(){e||(a=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,a),b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),b.STATIC_DRAW),c=b.createBuffer(),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c),b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,
1,2]),b.STATIC_DRAW),l.ra(),e=!0)},a:function(a){var c=d++,e=a.W.length,l=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,l);b.bufferData(b.ARRAY_BUFFER,a.kb instanceof Float32Array?a.kb:new Float32Array(a.kb),b.STATIC_DRAW);f=c;if(a.W){var k=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,k);if(65536>a.W.length){var t=Uint16Array;var A=b.UNSIGNED_SHORT;var F=2}else t=Uint32Array,A=b.UNSIGNED_INT,F=4;b.bufferData(b.ELEMENT_ARRAY_BUFFER,a.W instanceof t?a.W:new t(a.W),b.STATIC_DRAW);h=c}var E={rb:function(a){f!==
c&&(b.bindBuffer(b.ARRAY_BUFFER,l),f=c);a&&sa.Fa()},pb:function(){h!==c&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,k),h=c)},bind:function(a){E.rb(a);E.pb()},Bc:function(){b.drawElements(b.TRIANGLES,e,A,0)},Cc:function(a,c){b.drawElements(b.TRIANGLES,a,A,c*F)},remove:function(){b.deleteBuffer(l);a.W&&b.deleteBuffer(k);E=null}};return E},ra:function(){-1!==f&&(b.bindBuffer(b.ARRAY_BUFFER,a),f=-1);-1!==h&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c),h=-1)},i:function(a,c){a&&H.ra();c&&sa.Ga();b.drawElements(b.TRIANGLES,
3,b.UNSIGNED_SHORT,0)},Ib:function(){b.deleteBuffer(a);b.deleteBuffer(c)}};return l}(),B=function(){var a,c,d,f=!1,h={u:-2,Gb:1};return{m:function(){if(!f){a=b.createFramebuffer();var e=C.s();c=e&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=e&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;f=!0}},Nc:function(){return c},ya:function(){return d},U:function(){return b.FRAMEBUFFER},Pc:function(){return h},Fc:function(){return a},a:function(d){void 0===d.Xa&&(d.Xa=!1);var f=d.X?d.X:!1,e=
d.width,q=void 0!==d.height?d.height:d.width,g=a,r=!1,v=!1,t=0;f&&(e=e?e:f.v(),q=q?q:f.K());var A={ib:function(){v||(g=b.createFramebuffer(),v=!0,t=h.Gb++)},lb:function(){A.ib();A.l();r=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,r);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,e,q);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,r);b.clearDepth(1)},bind:function(a,d){t!==h.u&&(b.bindFramebuffer(c,g),h.u=t);f&&f.l();d&&b.viewport(0,0,e,q);a&&b.clear(b.COLOR_BUFFER_BIT|
b.DEPTH_BUFFER_BIT)},uc:function(){t!==h.u&&(b.bindFramebuffer(c,g),h.u=t)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},xc:function(){b.clear(b.COLOR_BUFFER_BIT)},yc:function(){b.clear(b.DEPTH_BUFFER_BIT)},mc:function(){b.viewport(0,0,e,q)},l:function(){t!==h.u&&(b.bindFramebuffer(c,g),h.u=t)},rtt:function(a){f=a;h.u!==t&&(b.bindFramebuffer(b.FRAMEBUFFER,g),h.u=t);a.l()},H:function(){b.bindFramebuffer(c,null);h.u=-1},resize:function(a,c){e=a;q=c;r&&(b.bindRenderbuffer(b.RENDERBUFFER,
r),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,e,q))},remove:function(){b.bindFramebuffer(c,g);b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0);r&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null);b.bindFramebuffer(c,null);b.deleteFramebuffer(g);r&&b.deleteRenderbuffer(r);A=null}};d.Xa&&A.lb();return A},H:function(){b.bindFramebuffer(c,null);h.u=-1},qc:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.viewport(0,0,
C.v(),C.K());h.u=-1},reset:function(){h.u=-2},N:function(){0!==h.u&&(b.bindFramebuffer(c,a),h.u=0)},clear:function(){b.viewport(0,0,C.v(),C.K());b.clear(b.COLOR_BUFFER_BIT)}}}(),S=function(){function a(a){b.bindTexture(b.TEXTURE_2D,a)}function c(a){n[0]=a;a=Z[0];var x=a>>16&32768,c=a>>12&2047,d=a>>23&255;return 103>d?x:142<d?x|31744|((255==d?0:1)&&a&8388607):113>d?(c|=2048,x|(c>>114-d)+(c>>113-d&1)):x=(x|d-112<<10|c>>1)+(c&1)}function d(a){var x=new Uint16Array(a.length);a.forEach(function(a,d){x[d]=
c(a)});return x}function f(){if(null!==Q.za)return Q.za;var a=e(d([1,1,1,1]));return null===a?!0:Q.za=a}function h(){if(null!==Q.Aa)return Q.Aa;var a=e(new Uint8Array([255,255,255,255]));return null===a?!0:Q.Aa=a}function e(a){if(!sa.Ba()||!F)return null;a=p.a({isFloat:!1,D:!0,array:a,width:1});B.H();b.viewport(0,0,1,1);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);sa.set("s0");a.Na(0);H.i(!1,!0);var c=new Uint8Array(4);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,c);c=.9<c[0];a.remove();B.N();
return c}var l=0,k,q=0,g,r=!1,v,t,A,F=!1,E=!1,G,u,z,P=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],M=!1,ca=!1,n=new Float32Array(1),Z=new Int32Array(n.buffer),Q={za:null,Aa:null},p={m:function(){if(!F){t=[b.RGB,!1,b.RGB,b.RGBA];A=[b.RGB,!1,b.RGB,b.RGBA];k=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7];M="undefined"!==typeof JEContext;ca="undefined"!==typeof C;M&&JEContext.$c()&&k.push(b.TEXTURE8,b.TEXTURE9);g=[-1,-1,-1,-1,-1,-1,-1,-1];v=[b.UNSIGNED_BYTE,b.FLOAT,
b.FLOAT];if(!r){for(var a=new Float32Array(16384),c=0;16384>c;++c)a[c]=2*Math.random()-1;r={random:p.a({isFloat:!0,isPot:!0,array:a,width:64}),jb:p.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}F=!0}},Rb:function(){p.sc()},Sc:function(){return r.jb},sc:function(){v[1]=C.ga_()},ic:function(){A=t=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},bd:function(a,c){m.set("s1");B.H();var x=a.v(),d=a.K();b.viewport(0,0,x,d);a.b(0);H.i(!1,!1);b.readPixels(0,0,x,d,b.RGBA,b.UNSIGNED_BYTE,c)},Hb:function(c,
d,f){b.activeTexture(b.TEXTURE0);l=0;var x=b.createTexture();a(x);var e=C.s()&&b.RGBA32F?b.RGBA32F:b.FLOAT;d=d instanceof Float32Array?d:new Float32Array(d);var h=Math.log(d.length)/Math.log(2);h!==Math.floor(h)&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,f);
b.texImage2D(b.TEXTURE_2D,0,b.RGBA,c.v(),c.K(),0,b.RGBA,e,d);a(null);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);B.N();m.set("s0");c.F();b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);a(x);H.i(!0,!1);b.deleteTexture(x)},a:function(c){function e(){a(O);da&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,da);c.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,c.$a?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,c.O?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,
b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));c.ha&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.Mc().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.tc);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,c.isLinear?b.LINEAR:b.NEAREST);c.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,c.isMipmap&&!ha?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,c.isMipmap&&!ha?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);W=
t[c.da-1];X=A[c.da-1];Y=v[x];if(C.s()){var d=b.RGBA32F;W===b.RGBA&&Y===b.FLOAT&&d&&(X=d);W===b.RGB&&Y===b.FLOAT&&d&&(X=d,W=b.RGBA)}if(c.D&&!c.isFloat||c.isFloat&&c.isMipmap&&ua.Ub())(d=b.RGBA16F)&&(X=d),Y=C.ga_();c.bb&&"undefined"!==typeof b.texStorage2D&&(oa=c.bb);c.ab&&4===c.da&&(W=JEContext.Qc());if(c.A)b.texImage2D(b.TEXTURE_2D,0,X,W,Y,c.A);else if(c.url)b.texImage2D(b.TEXTURE_2D,0,X,W,Y,N);else if(I){try{var e=b.getError();e!==b.NO_ERROR&&console.log("GLERR in SharedTexture :",e);b.texImage2D(b.TEXTURE_2D,
0,X,y,w,0,W,Y,I);b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,X,y,w,0,W,Y,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,y,w,0,b.RGBA,b.UNSIGNED_BYTE,null))}catch(Ja){b.texImage2D(b.TEXTURE_2D,0,X,y,w,0,W,Y,null)}c.isKeepArray||(I=null)}else b.texImage2D(b.TEXTURE_2D,0,X,y,w,0,W,Y,null);if(c.isMipmap)if(!ha&&L)L.xa(),pa=!0;else if(ha){e=Math.log(Math.min(y,w))/Math.log(2);la=Array(1+e);la[0]=O;for(d=1;d<=e;++d){var f=Math.pow(2,d);var h=y/f;f=w/f;var aa=b.createTexture();
a(aa);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,X,h,f,0,W,Y,null);a(null);la[d]=aa}pa=!0}a(null);g[l]=-1;da&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);ia=!0;R&&L&&(R(L),R=!1)}"undefined"===typeof c.isFloat&&(c.isFloat=!1);"undefined"===typeof c.D&&(c.D=!1);"undefined"===typeof c.isPot&&(c.isPot=!0);"undefined"===typeof c.isLinear&&(c.isLinear=!1);"undefined"===typeof c.isMipmap&&(c.isMipmap=!1);
"undefined"===typeof c.sa&&(c.sa=!1);void 0===c.ha&&(c.ha=!1);void 0===c.O&&(c.O=!1);void 0===c.$a&&(c.$a=!1);void 0===c.ab&&(c.ab=!1);void 0===c.da&&(c.da=4);void 0===c.Za&&(c.Za=!1);"undefined"===typeof c.isFlipY&&(c.isFlipY=c.url||c.array?!0:!1);"undefined"===typeof c.isKeepArray&&(c.isKeepArray=!1);c.data&&(c.array="string"===typeof c.data?qa(c.data):c.isFloat?new Float32Array(c.data):new Uint8Array(c.data),c.isFlipY=!1);var x=0,n=c.A?!0:!1,r=null,F=null,V=!1,D=null;c.isFloat&&(c.D=!0);c.D&&(x=
1);c.Za||C.s()||!c.isFloat||!ca||C.Pa()||(c.isFloat=!1);c.isFloat&&(x=2);c.ha&&M&&!JEContext.Vc()&&(c.ha=!1);var O=b.createTexture(),R=c.sa,N=null,I=!1,y=0,w=0,ia=!1,ea=q++,Q=!1,aa,fa,ra,ma,X,W,Y,da=c.isFlipY,ha=c.D&&c.isMipmap&&"undefined"!==typeof ua&&!ua.ub()?!0:!1,la,oa=-1,pa=!1;"undefined"!==typeof c.width&&c.width&&(y=c.width,w="undefined"!==typeof c.height&&c.height?c.height:y);var L={get:function(){return O},v:function(){return y},K:function(){return w},Tc:function(){return c.url},Wc:function(){return c.isFloat},
Yc:function(){return c.D},Zc:function(){return c.isLinear},xa:function(){b.generateMipmap(b.TEXTURE_2D)},Oa:function(c,d){ha?(c||(c=L.Ua()),L.qa(d),a(la[c]),g[d]=-1):L.b(d)},Ua:function(){-1===oa&&(oa=Math.log(y)/Math.log(2));return oa},Ta:function(c){if(ha){c||(c=L.Ua());m.set("s11");L.qa(0);var d,e=y,f=w;for(d=1;d<=c;++d)e/=2,f/=2,m.L("u7",.25/e,.25/f),b.viewport(0,0,e,f),a(la[d-1]),b.framebufferTexture2D(B.U(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,la[d],0),H.i(!1,1===d);g[0]=-1}else L.xa()},qa:function(a){a!==
l&&(b.activeTexture(k[a]),l=a)},b:function(c){if(!ia)return!1;L.qa(c);if(g[c]===ea)return!1;a(O);g[c]=ea;return!0},Na:function(c){b.activeTexture(k[c]);l=c;a(O);g[c]=ea},l:function(){b.framebufferTexture2D(B.U(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,O,0)},F:function(){b.viewport(0,0,y,w);b.framebufferTexture2D(B.U(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,O,0)},qd:function(){b.framebufferTexture2D(B.U(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},resize:function(a,c){y=a;w=c;e()},clone:function(a){a=p.a({width:y,
height:w,D:c.D,isFloat:c.isFloat,isLinear:c.isLinear,O:c.O,isFlipY:a?!da:da,isPot:c.isPot});sa.set("s0");B.N();a.l();b.viewport(0,0,y,w);L.b(0);H.i(!0,!0);return a},mc:function(){b.viewport(0,0,y,w)},remove:function(){b.deleteTexture(O);L=null},refresh:function(){L.Na(0);da&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);n?b.texImage2D(b.TEXTURE_2D,0,X,W,b.UNSIGNED_BYTE,c.A):b.texImage2D(b.TEXTURE_2D,0,X,y,w,0,W,Y,I);da&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Qa:function(){var a=y*w*4;fa=[new Uint8Array(a),
new Uint8Array(a),new Uint8Array(a),new Uint8Array(a)];aa=[new Float32Array(fa[0].buffer),new Float32Array(fa[1].buffer),new Float32Array(fa[2].buffer),new Float32Array(fa[3].buffer)];ra=new Uint8Array(4*a);ma=new Float32Array(ra.buffer);Q=!0},gb:function(){Q||L.Qa();b.readPixels(0,0,y,4*w,b.RGBA,b.UNSIGNED_BYTE,ra);var a,c=y*w,d=2*c,e=3*c;for(a=0;a<c;++a)aa[0][a]=ma[a],aa[1][a]=ma[a+c],aa[2][a]=ma[a+d],aa[3][a]=ma[a+e];return aa},Ra:function(){B.H();m.set("s12");L.b(0);b.viewport(0,0,y,4*w);for(var a=
0;4>a;++a)b.viewport(0,w*a,y,w),m.ma("u8",P[a]),H.i(!1,0===a)},rc:function(c){var d=Y===v[0]&&!h();a(O);da&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,da);d?(V||(r=document.createElement("canvas"),r.width=y,r.height=w,F=r.getContext("2d"),D=F.createImageData(y,w),V=!0),D.data.set(c),F.putImageData(D,0,0),b.texImage2D(b.TEXTURE_2D,0,X,W,Y,r)):b.texImage2D(b.TEXTURE_2D,0,X,y,w,0,W,Y,c);g[l]=ea;da&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},rd:function(c,d){a(O);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,d);b.texImage2D(b.TEXTURE_2D,
0,X,W,Y,c);g[l]=ea;d&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},dd:function(a,d){var e=y*w,f=4*e;a=c.D?a?"RGBE":"JSON":"RGBA";d&&(a=d);d=C.s()&&!1;switch(a){case "RGBE":var h="s39";break;case "JSON":h=d?"s0":"s12";break;case "RGBA":case "RGBAARRAY":h="s6"}Q||("RGBA"===a||"RGBE"===a||"RGBAARRAY"===a?(fa=new Uint8Array(f),Q=!0):"JSON"!==a||d||L.Qa());B.H();m.set(h);L.b(0);if("RGBA"===a||"RGBE"===a||"RGBAARRAY"===a){b.viewport(0,0,y,w);H.i(!0,!0);b.readPixels(0,0,y,w,b.RGBA,b.UNSIGNED_BYTE,fa);if("RGBAARRAY"===
a)return{data:fa};E||(G=document.createElement("canvas"),u=G.getContext("2d"),E=!0);G.width=y;G.height=w;z=u.createImageData(y,w);z.data.set(fa);u.putImageData(z,0,0);var g=G.toDataURL("image/png")}else if("JSON"===a)if(d)g=new Float32Array(e),b.viewport(0,0,y,w),H.i(!0,!0),b.readPixels(0,0,y,w,b.RGBA,b.FLOAT,g);else{for(g=0;4>g;++g)b.viewport(0,w*g,y,w),m.ma("u8",P[g]),H.i(!g,!g);L.gb();g=Array(e);for(h=0;h<e;++h)g[4*h]=aa[0][h],g[4*h+1]=aa[1][h],g[4*h+2]=aa[2][h],g[4*h+3]=aa[3][h]}return{format:a,
data:g,width:y,height:w,isMirrorY:c.O,isFlipY:"RGBA"===a?c.isFlipY:!c.isFlipY}}};c.isMipmap&&!ha&&ia&&!pa&&(L.xa(),pa=!0);if(c.url)a(O),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),N=new Image,N.Ac="Anonymous",N.crossOrigin="Anonymous",N.src=c.url,N.onload=function(){y=N.width;w=N.height;e()};else if(c.A){var Z=function(){y=void 0!==c.A.videoWidth?c.A.videoWidth:c.A.width;w=void 0!==c.A.videoHeight?c.A.videoHeight:c.A.height;y?e():setTimeout(Z,1)};Z()}else c.array?(c.D&&!c.isFloat?
c.array instanceof Uint16Array?(I=c.array,e()):f()?(I=d(c.array),e()):(e(),p.Hb(L,c.array,da)):(I=c.isFloat?c.array instanceof Float32Array?c.array:new Float32Array(c.array):c.array instanceof Uint8Array?c.array:new Uint8Array(c.array),e()),c.isKeepArray||(I&&I!==c.array&&(I=null),delete c.array)):e();L.Ob=L.v;R&&ia&&(R(L),R=!1);return L},H:function(c){c!==l&&(b.activeTexture(k[c]),l=c);g[c]=-1;a(null)},vc:function(a){r.random.b(a)},reset:function(){for(var a=0;a<k.length;++a)g[a]=-1;l=-1},cd:function(){l=
-1},od:function(){for(var a=0;a<k.length;++a)p.H(a)},Ib:function(){r&&(r.random.remove(),r.jb.remove())},pd:function(a,c){if("RGBA"===a.format||"RGBE"===a.format){var d=new Image;d.src=a.data;d.onload=function(){p.a({O:a.isMirrorY,isFlipY:a.isFlipY,isFloat:!1,A:d,sa:function(d){if("RGBA"===a.format)c(d);else{var e=a.width,f=a.height,h=p.a({O:a.isMirrorY,isFloat:!0,width:e,height:f,isFlipY:a.isFlipY});B.N();b.viewport(0,0,e,f);m.set("s40");h.l();d.b(0);H.i(!0,!0);p.H(0);c(h);b.flush();setTimeout(d.remove,
50)}}})}}else"JSON"===a.format?c(p.a({isFloat:!0,isFlipY:a.isFlipY,width:a.width,height:a.height,array:new Float32Array(a.data)})):c(!1)}};return p}(),C=function(){function a(){c="undefined"===typeof va?JEContext:va;d=!0}var c,d=!1,f=!1,h=!1,e=!1,l=!1,k=!1,q=!1,g=!1,r=!1,v=!1,t=!1,A=!0,F=!0,E=!0,G,u="undefined"===typeof window?{}:window,z={m:function(){if(d)return!0;a();z.Sa();z.wa();z.Db();z.Eb();B.m();S.m();if(!z.yb())return!1;H.m();S.Rb();return!0},v:function(){d||a();return c.v()},K:function(){d||
a();return c.K()},s:function(){d||a();return c.s()},Db:function(){t=(v=b.getExtension("EXT_color_buffer_float")||b.getExtension("WEBGL_color_buffer_float")||b.getExtension("OES_color_buffer_float"))?!0:!1;u.GL_EXT_COLORBUFFERFLOAT=v},Eb:function(){b.getExtension("EXT_color_buffer_half_float")||b.getExtension("WEBGL_color_buffer_half_float")||b.getExtension("OES_color_buffer_half_float")},Sa:function(){if(!f){this.s()||(h=b.getExtension("OES_texture_float")||b.getExtension("MOZ_OES_texture_float")||
b.getExtension("WEBKIT_OES_texture_float"),l=(u.GL_EXT_FLOAT=h)?!0:!1);if(l||this.s())e=b.getExtension("OES_texture_float_linear")||b.getExtension("MOZ_OES_texture_float_linear")||b.getExtension("WEBKIT_OES_texture_float_linear"),u.GL_EXT_FLOATLINEAR=e;f=!0}},wa:function(){if(!r){if(!this.s()){if(k=b.getExtension("OES_texture_half_float")||b.getExtension("MOZ_OES_texture_half_float")||b.getExtension("WEBKIT_OES_texture_half_float"))G=k.HALF_FLOAT_OES,q=!0;u.GL_EXT_HALFFLOAT=k}if(q||this.s())g=b.getExtension("OES_texture_half_float_linear")||
b.getExtension("MOZ_OES_texture_half_float_linear")||b.getExtension("WEBKIT_OES_texture_half_float_linear"),u.GL_EXT_HALFFLOATLINEAR=g;r=!0}},ga_:function(){if(z.s())return b.HALF_FLOAT;z.wa();return q?G:b.FLOAT},Pa:function(){return A},tb:function(){return F},wc:function(){return E},sb:function(){return t},Ab:function(){F=A=!0;var a=b.createFramebuffer();b.bindFramebuffer(b.FRAMEBUFFER,a);var c=b.createTexture();b.bindTexture(b.TEXTURE_2D,c);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);
b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,z.s()&&b.RGBA32F?b.RGBA32F:b.RGBA,1,1,0,b.RGBA,b.FLOAT,null);b.framebufferTexture2D(B.U(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,c,0);var d=b.checkFramebufferStatus(B.ya());d!==b.FRAMEBUFFER_COMPLETE&&(A=!1);b.texImage2D(b.TEXTURE_2D,0,z.s()&&b.RGBA16F?b.RGBA16F:b.RGBA,1,1,0,b.RGBA,z.ga_(),null);b.framebufferTexture2D(B.U(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,c,0);d=b.checkFramebufferStatus(B.ya());d!==b.FRAMEBUFFER_COMPLETE&&
(F=!1);b.bindTexture(b.TEXTURE_2D,null);b.bindFramebuffer(b.FRAMEBUFFER,null);b.deleteTexture(c);b.deleteFramebuffer(a)},zb:function(){var a=B.a({width:1});a.ib();var c=S.a({width:1,isFloat:!0,da:3});a.l();c.l();b.flush();b.checkFramebufferStatus(B.ya())!==b.FRAMEBUFFER_COMPLETE?(S.ic(),E=!1):E=!0;a.remove();c.remove()},yb:function(){z.Ab();if(!A&&!F)return!1;z.zb();return!0}};return z}(),ua=function(){var a=!1,c=[.8,1,.8,1],d=0,f,h=new Uint8Array(4),e=c.concat(c,c,c),l=!0,k={m:function(){function c(a,
c,d,e){b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,e?b.NEAREST_MIPMAP_NEAREST:b.LINEAR);try{var f=b.getError();f!==b.NO_ERROR&&console.log("GLERR in test_mipmapping() :",f);b.texImage2D(b.TEXTURE_2D,0,a,2,2,0,b.RGBA,c,d);f=b.getError();if(f!==b.NO_ERROR)return!1}catch(P){return!1}e&&b.generateMipmap(b.TEXTURE_2D);H.ra();H.i(!1,!0);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,h);f=b.getError();f===b.INVALID_OPERATION&&"undefined"!==typeof b.PIXEL_PACK_BUFFER&&(b.bindBuffer(b.PIXEL_PACK_BUFFER,
null),b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,h),f=b.getError());return f!==b.NO_ERROR?!1:0!==h[0]}function g(a){return C.Pa()&&c(v,b.FLOAT,new Float32Array(e),a)?(d=3,!0):!1}function k(a){return C.tb()?c(t,C.ga_(),new Uint16Array(e),a)||c(t,b.FLOAT,new Float32Array(e),a)?(d=2,!0):!1:!1}C.Sa();C.wa();var v=b.RGBA,t=b.RGBA;if(va.s()){var A=b.RGBA32F;A&&(v=A);(A=b.RGBA16F)&&(t=A)}H.m();B.reset();B.H();b.viewport(0,0,1,1);m.set("s0");a=!0;f=b.createTexture();b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,
f);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.REPEAT);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.REPEAT);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);if(k(!0)||g(!0))return!0;l=!1;if(k(!1)||g(!1))return!0;if(va.s()){t=v=b.RGBA;if(k(!0)||g(!0))return!0;l=!1;if(k(!1)||g(!1))return!0}return!1},ub:function(){return l},Oc:function(){return d},Xc:function(){a||k.m();return 3===d},Ub:function(){a||k.m();return 2===d}};return k}(),wa={a:function(a){var c=S.a(a.alpha),d=S.a(a.beta);
return{Cb:function(){c.b(1);d.b(2)}}}},za={a:function(a){var c=a.nc;c.index=a.index;c.P=a.P;c.parent=a.parent;switch(c.type){case "input":a=xa.a(c);break;default:a=ya.a(c)}return a}},xa={a:function(a){"undefined"===typeof a.sift&&(a.sift=!1);"undefined"===typeof a.DWT&&(a.DWT=!1);"undefined"===typeof a.blur&&(a.blur=!1);"undefined"===typeof a.siftOutWidth&&(a.siftOutWidth=!1);"undefined"===typeof a.filterBank&&(a.filterBank=!1);"undefined"===typeof a.poolType&&(a.poolType="max");"undefined"===typeof a.postpreprocessing&&
(a.postpreprocessing="copy");"undefined"===typeof a.density&&(a.density=1);a.filterBank&&(FilterBank.fd(a.poolType,a.postpreprocessing),FilterBank.ed(a.density));var c=!1;if(a.mask){c=!0;SETTINGS&&void 0!==SETTINGS.ob&&(a.mask=SETTINGS.ob+a.mask);var d=S.a({isFloat:!1,url:a.mask})}var f=!1,h="undefined"!==typeof a.preprocessing?a.preprocessing:!1,e=!1;a.sift?Sift.m({Qb:b,aa:!1,width:a.size,ad:a.siftOutWidth}):a.DWT&&DWT.m({Qb:b,aa:!1,width:a.size});switch(h){case "sobel":var l="s30";e=!0;break;case "meanNormalization":l=
"s31";e=!0;break;case "grayScale":l="s29";e=!1;break;case "copy":l="s0";break;case "inputLightRegulation":l="s29";Aa.m({width:a.size,cb:a.nBlurPass,Tb:!1});f=!0;break;case "direct":case "none":l=!1;break;default:l="s3"}c&&(l+="Mask");if(a.blur)var k=S.a({isFloat:!1,isPot:!1,width:a.size});var q=S.a({isFloat:!1,isPot:!1,width:a.size}),g={v:function(){return a.sift?Sift.V():a.filterBank?FilterBank.V():a.size},V:function(){return g.v()},Mb:function(){return a.sift?Sift.ca():a.DWT?DWT.ca():a.filterBank?
FilterBank.ca():f?Aa.ca():q},B:function(){B.N();a.blur&&(k.F(),m.set("s41"),m.L("u7",1/a.size,1/a.size),H.i(!1,!0),k.b(0));l&&(m.set(l),e&&m.G("u28",1/a.size),q.F(),c&&d.b(1),H.i(!1,!1),q.b(0),f?Aa.ja(q):a.sift?(m.S(),Sift.ja()):a.DWT?(m.S(),DWT.ja(4)):a.filterBank&&(m.S(),FilterBank.ja(q)))}};return g}},ya={a:function(a){"undefined"===typeof a.disableNormalize&&(a.disableNormalize=!1);var c=[],d=[],f,h,e=!1,l,k=!0,q,g,r=a.isReorganize?a.isReorganize:!1,v=a.kernelsNumber?!0:!1,t=a.dynPelu?wa.a(a.dynPelu):
!1,A=t?!0:!1,F={isEnabled:!1},E;if("softmax"===a.type){a.activation="softmax";a.size=Math.pow(2,Math.ceil(Math.log(Math.sqrt(a.num_classes))/Math.log(2)));a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.P.V();a.gain="undefined"!==typeof a.gain?a.gain:1;m.I("s20",[{type:"1f",name:"u10",value:a.gain}]);var G=S.a({isFloat:!0,isPot:!1,width:a.size}),u=S.a({isFloat:!0,isPot:!1,width:a.size,isMipmap:!0});k=!1;var z=new Uint8Array(Math.pow(4*a.size,2)),P;for(P=0;P<a.size*a.size;++P){var M=P<a.num_classes?
255:0;z[4*P]=M;z[4*P+1]=M;z[4*P+2]=M;z[4*P+3]=M}var ca=S.a({isFloat:!1,isPot:!1,width:a.size,array:z})}else a.cost?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.P.V(),k=!1):"full"===a.connectivityUp&&(a.sparsity=a.P.V());var n={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",softmax:"s20",dynPelu:"s17"}[a.activation],Z=a.sparsity*a.sparsity,Q=!1,p=a.size;if(a.maxPooling){switch(a.maxPooling.size){case 2:var x="s32";break;case 4:x="s33"}Q=!0;p/=a.maxPooling.size;
var J=S.a({isFloat:!0,isPot:!1,width:p})}var K=void 0!==a.bc&&a.bc?!0:!1,U=null,T=null,ba=null;K&&(U="s42"+a.index.toString(),m.Wa("s42",U,[((a.normalization.n-1)/2).toFixed(1)]),m.I(U,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/a.size,1/a.size]},{type:"1f",name:"u6",value:a.normalization.alpha},{type:"1f",name:"u9",value:a.normalization.beta},{type:"1f",name:"u32",value:a.normalization.k}]),T=S.a({isFloat:!0,isPot:!0,width:a.size}),ba=S.a({isFloat:!0,isPot:!0,width:a.size}));var V,
D,O,R;k&&(R=S.a({isFloat:!0,isPot:!1,width:a.size}));var N=S.a(a.bias),I,y={v:function(){return a.size},V:function(){return p},Va:function(){return a.num_classes},qb:function(a){E.b(a)},ec:function(){a.remap&&a.remap.isEnabled&&(F={isEnabled:!0,Xb:S.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),width:a.remap.maskTexture.width,isPot:!1}),layers:a.remap.layers.map(function(c){return a.parent.Lb(c)}),depth:a.remap.depth})},kc:function(){switch(a.connectivityUp){case "gaussian":I=
Ba.a(a.connectivity);break;case "direct":I=Ca.a(a.connectivity);break;case "square":I=Da.a(a.connectivity);break;case "squareFast":I=Ea.a(a.connectivity,a.activation);break;case "full":I=Fa.a(a.connectivity);break;case "conv":g=a.kernelsNumber,I=Ga.a(a.connectivity),r&&(q=S.a({width:p,isFloat:!0,isFlipY:!1,isPot:!1}))}if(I.R){var c=a.size*a.sparsity;D=Math.log(c/a.size)/Math.log(2);V=S.a({isMipmap:!0,isFloat:!0,isPot:!0,width:c,bb:D});O=S.a({isFloat:!0,isPot:!0,width:a.size})}},B:function(c,d){E=
c;I.R?(V.F(),v&&N.b(2),I.B(F),V.b(0),V.Ta(D),O.F(),v?m.set("s0"):(m.set("s28"),m.G("u27",Z),N.b(1)),V.Oa(D,0),H.i(!1,!1),m.set(n),K?T.l():R.l(),O.b(0),A&&t.Cb(),H.i(!1,!1)):(R.F(),N.b(1),I.B());K&&(m.set(U),ba.l(),T.b(0),H.i(!1,!1),m.set("s43"),m.G("u6",1),R.l(),ba.b(1),H.i(!1,!1));if(k)return Q?(J.F(),R.b(0),m.set(x),m.L("u7",1/a.size,1/a.size),H.i(!1,!1),d=J):d=R,d.b(0),r&&(q.l(),m.set("s22"),m.L("u14",g,p/g),H.i(!1,!1),d=q,q.b(0)),d;if("softmax"===a.type){m.set("s20");R.b(0);G.l();H.i(!1,!1);a.disableNormalize?
c=G:(m.set("s2"),G.b(0),ca.b(1),u.l(),H.i(!1,!1),m.set("s0"),h.F(),u.b(0),u.Ta(!1),H.i(!1,!1),m.set("s21"),f.F(),u.Oa(!1,0),m.G("u12",R.Ob()),h.b(1),H.i(!1,!1),c=f);if(d){switch(e){case "cpuRGBAAvg":break;default:var w=y.fb(c)}return w}return!1}if(a.cost){m.set("gpuRawAvg"===e?"s8":"s7");d=R;a.disableNormalize||(m.G("u4",1/a.size),f.F(),R.b(0),H.i(!1,!1),d=f);switch(e){case "cpuRGBA2Float":d.Ra();w=y.fb(d);l(w);break;case "gpuRawAvg":case "gpuRaw":d.b(0),l(d)}return!1}},wb:function(g){g&&"undefined"!==
typeof g.eb&&(e=g.eb,l=g.dc);R=S.a({isFloat:!0,isPot:!0,isMipmap:"softmax"===a.type,width:a.size});"softmax"===a.type&&(h=S.a({isFloat:!0,isPot:!0,width:1}));var k=0,n=0,p="undefined"!==typeof a.num_classes&&a.num_classes?a.num_classes:a.size*a.size;for(g=0;g<p;++g)c.push(k+(a.size-1-n)*a.size),d.push([-1,-1,-1,-1]),++k,k===a.size&&(k=0,++n);a.disableNormalize||(f=S.a({isFloat:!0,isPot:!0,width:a.size}))},fb:function(a){a.Ra();var e=a.gb();c.forEach(function(a,c){d[c][0]=e[0][a];d[c][1]=e[1][a];d[c][2]=
e[2][a];d[c][3]=e[3][a]});return d}};a.P&&y.kc(a.P);return y}};
function Ha(){var a,c,d,f;a||(a={});this.Lb=function(a){return c[a]};this.hc=function(a){var e=!1;c=a.map(function(a,c){return e=a=za.a({index:c,parent:this,nc:a,P:e})});d=c[0];f=c[c.length-1];c.forEach(function(a,c){0!==c&&a.ec()})};this.B=function(a,d){var e=d;c.forEach(function(c){e=c.B(e,a)});return e};this.Kb=function(){return d.v()};this.Nb=function(){return f.v()};this.ca=function(){return f.Mb()};this.jc=function(a){f.wb(a)};this.Va=function(){return f.Va()}}
var Ca={a:function(a){var c=S.a(a.weights);delete a.weights.data;return{R:!0,ba:function(){return 1},Pb:function(){return c},B:function(){m.set("s27");c.b(1);H.i(!1,!1)}}}},Fa={a:function(a){var c=a.fromLayerSize,d=S.a(a.weights);return{R:!0,ba:function(){return c},B:function(c){if(c.isEnabled){m.set("s25");c.Xb.b(3);var f,e=Math.min(c.layers.length,c.depth);for(f=0;f<e;++f)c.layers[f].qb(4+f)}else m.set("s24");m.G("u18",a.toLayerSize);d.b(1);H.i(!1,!1)}}}},Ba={a:function(a){var c=a.toSparsity*a.toLayerSize,
d=c/a.fromLayerSize,f=S.a(a.weights);S.a({width:c,isFloat:!0,array:new Float32Array(a.fromBindings),isPot:!0});var h=S.a({width:c,isFloat:!0,array:new Float32Array(a.toBindings),isPot:!0});return{R:!0,ba:function(){return d},B:function(){m.set("s23");f.b(1);h.b(2);H.i(!1,!0)}}}},Da={a:function(a){var c=a.fromLayerSize,d=a.toLayerSize,f=a.toSparsity,h=f*d,e=h/c,l=c/d,k,q,g,r,v=0,t=0,A=0,F=Array(f*d*f*d*4),E=Array(f*d*f*d*4),G=Array(c*c);for(k=0;k<G.length;++k)G[k]=0;var u=Math.floor(f/2),z=.5/d,P=
.5/c,M=.5/h;for(k=0;k<d;++k)for(q=0;q<d;++q){var ca=Math.round(k*l);var n=Math.round(q*l);var Z=k/d;var Q=q/d;Z+=z;Q+=z;for(g=0;g<f;++g)for(r=0;r<f;++r){var p=v/h;var x=t/h;var J=ca+g-u;var K=n+r-u;0>J&&(J+=c);0>K&&(K+=c);J>=c&&(J-=c);K>=c&&(K-=c);var U=J/c;var T=K/c;x=1-x-1/h;U+=P;T+=P;p+=M;x+=M;var ba=k*f+g,V=q*f+r;V=d*f-V-1;ba=V*d*f+ba;F[4*ba]=p;F[4*ba+1]=x;F[4*ba+2]=U;F[4*ba+3]=T;U=G[K*c+J]++;T=U%e;J=J*e+T;K=K*e+(U-T)/e;K=c*e-1-K;K=K*c*e+J;E[4*K]=p;E[4*K+1]=x;E[4*K+2]=Z;E[4*K+3]=Q;++v>=h&&(v=
0,++t);++A}}var D=S.a(a.weights);S.a({width:h,isFloat:!0,array:new Float32Array(E),isPot:!0});E=null;var O=S.a({width:h,isFloat:!0,array:new Float32Array(F),isPot:!0});F=null;return{R:!0,ba:function(){return e},B:function(){m.set("s23");D.b(1);O.b(2);H.i(!1,!1)}}}},Ga={a:function(a){var c=a.kernelsNumber,d=a.toSparsity,f=d*a.toLayerSize/a.fromLayerSize,h=S.a(a.weights);return{R:!0,ba:function(){return f},Rc:function(){return d},Pb:function(){return h},B:function(){m.set("s26");m.G("u24",c);m.G("u25",
d);m.G("u18",a.toLayerSize);m.G("u26",a.fromLayerSize);h.b(1);H.i(!1,!1)}}}},Ea={a:function(a,c){var d=a.fromLayerSize,f=a.toLayerSize,h=a.toSparsity,e=a.stride?a.stride:1,l=h*f/d,k=f<d,q=d/f,g=S.a(a.weights),r="s44"+[d.toString(),f.toString(),h.toString(),e.toString(),c].join("_");m.Fb(r)||(a=ka(c),f=[{type:"1f",name:"u18",value:f},{type:"1f",name:"u31",value:e}],k&&f.push({type:"1f",name:"u26",value:d}),d=[(k?l:h).toFixed(1),a],k&&d.push(q.toFixed(1)),m.Wa(k?"s38":"s37",r,d),m.I(r,f.concat([{type:"1i",
name:"u16",value:0},{type:"1i",name:"u23",value:1},{type:"1i",name:"u15",value:3}])));return{R:!1,ba:function(){return l},B:function(){m.set(r);g.b(3);H.i(!1,!1)}}}},Aa=function(){var a,c,d,f,h,e,l,k,q;return{m:function(g){a=g.cb?g.cb:3;c=g.width?g.width:64;f=g.Tb?!0:!1;g={isFloat:!1,width:c,isPot:!1,isFlipY:!1};h=S.a(g);e=S.a(g);l=S.a(g);k=S.a(g);q=S.a({isFloat:!0,width:c,isPot:!1,isFlipY:!1});d=1/c},ja:function(c){m.set("s35");for(var g=0;g<a;++g)h.l(),m.L("u7",d,0),H.i(f,!1),e.l(),h.b(0),m.L("u7",
0,d),H.i(f,!1),e.b(0);m.set("s34");k.l();c.b(0);H.i(f);m.set("s35");for(g=0;g<a;++g)l.l(),k.b(0),m.L("u7",d,0),H.i(f,!1),k.l(),l.b(0),m.L("u7",0,d),H.i(f,!1);m.set("s36");q.l();c.b(0);e.b(1);k.b(2);H.i(f,!1);q.b(0)},ca:function(){return q}}}();
window.JEEARAPI=function(){var a,c,d,f;function h(a,c){for(var d in a)"undefined"!==typeof c[d]&&(a[d]=c[d])}function e(a){if(a){var c=a.w,d=a.h;n.J.ta[0]=-1+2*(a.x+c/2)/n.videoWidth;n.J.ta[1]=-1+2*(a.y+d/2)/n.videoHeight;n.J.scale[0]=c/n.videoWidth;n.J.scale[1]=d/n.videoHeight}n.width=n.videoWidth*n.J.scale[0];n.height=n.videoHeight*n.J.scale[1]}function l(){var a=[{type:"2f",name:"u33",value:n.J.ta},{type:"2f",name:"u34",value:n.J.scale}];m.I("s46",a);m.I("s47",a)}function k(a,c,d){var e=d[1]*g(a,
c,"dy"),f=d[2]*g(a,c,"ds"),h=p.j[2],aa=p.j[3];p.j[0]-=d[0]*g(a,c,"dx")*h*u.va[0];p.j[1]-=e*aa*u.va[1];p.j[2]-=f*h*u.va[2];p.j[2]=Math.min(Math.max(p.j[2],u.hb[0]),u.hb[1]);p.j[0]=Math.min(Math.max(p.j[0],0),1);p.j[3]=p.j[2]*n.aspectRatio;p.j[1]=Math.min(Math.max(p.j[1],0),1)}function q(a){var c=p.j[2],d=p.j[3],e=(2*Math.random()-1)*a,f=(2*Math.random()-1)*a;p.j[0]+=(2*Math.random()-1)*a*c;p.j[1]+=e*d;p.j[2]+=f*c;p.j[3]=p.j[2]*n.aspectRatio}function g(a,c,d){c=U[c].Wb[d];return(a[c][0]+a[c][1]+a[c][2]+
a[c][3])/4}function r(a,c){return(g(a,c,"here")-g(a,c,"notHere"))/U[c].Ja}function v(){J=x.Y;var a=Z[Q];p.j[0]=a[0];p.j[1]=a[1];p.j[2]=a[2];p.j[3]=a[3];Q=(Q+1)%Z.length}function t(a,c){N.label=U[D.C].label;N.distance=U[D.C].Bb;N.positionScale[0]=p.j[0];N.positionScale[1]=p.j[1];N.positionScale[2]=p.j[2];N.positionScale[3]=p.j[3];N.detectScore=c;N.yaw=a}function A(a){var c=-1,d=-1E12;-1!==[x.Y,x.pa].indexOf(J)&&U.forEach(function(e,f){e=r(a,f);e>d&&(d=e,c=f)});switch(J){case x.Y:J=x.pa;k(a,c,[1,1,
1]);f=0;break;case x.pa:++f;d>I?(w?(J=x.oa,V=c,D.C=c,D.Ea=0):(J=x.La,ba=0,V=c),k(a,V,[1,1,1])):f>u.Zb?v():k(a,c,[1,1,1]);break;case x.La:++ba;ba>u.ac&&(J=x.oa,D.n=0,D.na=0,D.C=V,D.M[0]=0,D.M[1]=0);k(a,V,[1,1,1]);q(u.Vb);break;case x.oa:if(w||++D.n>u.ia){var e=w?r(a,D.C):D.na/u.ia;w||e>I+u.oc?(t(w?Math.PI*g(a,D.C,"yaw"):Math.atan2(D.M[1],D.M[0]),e),ia?(k(a,D.C,ea),e>y?D.Ea=0:++D.Ea>u.Yb&&v()):v()):v()}else k(a,D.C,[1,1,1]),q(u.vb*(u.ia-D.n)/u.ia),D.na+=r(a,D.C),U.forEach(function(c,d){D.C!==d&&r(a,
d)>I*u.pc&&v()}),e=Math.PI*g(a,D.C,"yaw"),D.M[0]+=Math.cos(e),D.M[1]+=Math.sin(e)}}function F(){m.nb([{id:"s46",name:"_",ea:"attribute vec2 a0;uniform vec4 u35;uniform vec2 u33,u34;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);vec2 a=u33+a0*u34;vv0=u35.xy+.5*u35.zw*a;}",Z:["a0"],T:[2],c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1","u35","u34","u33"],precision:"lowp"},{id:"s48",name:"_",ea:"attribute vec2 a0;uniform vec4 u35;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u35.xy+.5*u35.zw*a0;}",
Z:["a0"],T:[2],c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec3 g=vec3(1.,1.,1.);float c[5];void main(){c[0]=texture2D(u1,vv0-u7*vec2(-1.,0.)).r,c[1]=texture2D(u1,vv0-u7*vec2(0.,-1.)).r,c[2]=texture2D(u1,vv0-u7).r,c[3]=texture2D(u1,vv0-u7*vec2(0.,1.)).r,c[4]=texture2D(u1,vv0-u7*vec2(1.,0.)).r;float a,b;a=min(c[0],c[1]),b=max(c[0],c[1]),c[0]=a,c[1]=b,a=min(c[0],c[2]),b=max(c[0],c[2]),c[0]=a,c[2]=b,a=min(c[0],c[3]),b=max(c[0],c[3]),c[0]=a,c[3]=b,a=min(c[0],c[4]),b=max(c[0],c[4]),c[0]=a,c[4]=b,a=min(c[1],c[2]),b=max(c[1],c[2]),c[1]=a,c[2]=b,a=min(c[1],c[3]),b=max(c[1],c[3]),c[1]=a,c[3]=b,a=min(c[1],c[4]),b=max(c[1],c[4]),c[1]=a,c[4]=b,a=min(c[2],c[3]),b=max(c[2],c[3]),c[2]=a,c[3]=b,a=min(c[2],c[4]),b=max(c[2],c[4]),c[2]=a,c[4]=b,gl_FragColor=vec4(c[2]*g,1.);}",
f:["u1","u35","u7"],precision:"lowp"},{id:"s47",name:"_",ea:"attribute vec2 a0;uniform vec2 u33,u34;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){gl_Position=vec4(a0,0.,1.);vec2 a=u33+a0*u34,b=(a+f)/2.;vv0=b;}",Z:["a0"],T:[2],c:"uniform sampler2D u1;uniform vec4 u35;varying vec2 vv0;void main(){vec2 b=u35.xy-.5*u35.zw,c=u35.xy+.5*u35.zw,a=step(b,vv0)*step(vv0,c);gl_FragColor=mix(texture2D(u1,vv0),vec4(0.,1.,0.,1.),a.x*a.y*.5);}",f:["u1","u35","u34","u33"],precision:"lowp"}]);var a=[{type:"1i",
name:"u1",value:0}];m.I("s46",a);m.I("s48",a);m.I("s47",a)}function E(){n.aspectRatio=n.width/n.height;n.Ca=Math.round(n.width*z.margins);n.Da=Math.round(n.height*z.margins);n.Ia=n.width-2*n.Ca;n.Ha=n.height-2*n.Da;var a=Math.min(n.width,n.height),c,d,e;for(c=0;c<z.nSweepSsteps;++c){var f=z.sweepScaleRange[0]+c/(z.nSweepSsteps-1)*(z.sweepScaleRange[1]-z.sweepScaleRange[0]);f*=a;var g=f/n.width;var h=g*n.aspectRatio;var k=(n.Ia-f)*(n.Ha-f);var l=Math.min(Math.floor(k/(z.sweepStepMinPx*z.sweepStepMinPx)),
z.nSweepXYsteps);l=k/l;var p=Math.round(Math.sqrt(l));var q=Math.round((n.Ia-f)/p);var r=Math.round((n.Ha-f)/p);for(e=0;e<r;++e)for(k=n.Da+Math.round(f/2+p*e),k/=n.height,d=0;d<q;++d)l=n.Ca+Math.round(f/2+p*d),l/=n.width,Z.push([l,k,g,h])}if(z.sweepShuffle)for(a=Z,c=a.length-1;0<c;--c)f=Math.floor(Math.random()*(c+1)),g=a[c],a[c]=a[f],a[f]=g;else Z.reverse()}function G(d){a=S.a({isLinear:!0,width:n.width,height:n.height,A:d,isPot:!1,isFlipY:!0,isFloat:!1});c=!0}var u={fa:512,va:[.05,.05,.15],fc:{margins:.1,
nSweepXYsteps:36,nSweepSsteps:4,sweepScaleRange:[.3,.7],sweepStepMinPx:16,sweepShuffle:!0},hb:[1/15,.9],$b:3,Zb:3,Ja:.68,ac:10,Vb:.015,ia:8,oc:-.02,vb:.01,zc:.06,pc:.7,Yb:20},z=Object.create(u.fc),P,M=!1,ca=!1,n={aspectRatio:1,width:0,height:0,videoWidth:0,videoHeight:0,Ca:0,Da:0,Ia:0,Ha:0,ua:"s46",J:{ta:[0,0],scale:[1,1]}},Z=[],Q=0,p={X:!1,j:[0,0,0,0]},x={Ma:-2,LOADING:-1,Y:0,pa:1,La:2,oa:3},J=x.Ma,K=-2,U,T;var ba=f=0;var V=-1;var D={n:0,Ea:0,C:-1,na:0,M:[0,0]};var O=0;var R=c=a=d=!1,N={distance:0,
label:!1,positionScale:[0,0,0,0],detectScore:0,yaw:0},I=1,y=1,w=!1,ia=!1,ea=[2,2,2],ta={init:function(a){function c(c){a.callbackReady&&a.callbackReady(c)}if(J!==x.Ma)return c("ALREADY_INITIALIZED");J=x.LOADING;if("undefined"!==typeof a.canvas)M=a.canvas,ca=!1;else if("undefined"===typeof a.canvasId)M=document.createElement("canvas"),ca=!1;else{M=document.getElementById(a.canvasId);if(!M)return c("INVALID_CANVASID"),!1;ca=!0}"undefined"!==typeof a.isDebugRender&&(ca=a.isDebugRender);ca&&(M.style.display=
"block");a.scanSettings&&h(z,a.scanSettings);a.canvasSize&&(u.fa=a.canvasSize);R="undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope;-1!==u.fa&&(M.width=u.fa,M.height=u.fa);"undefined"!==typeof a.video&&a.video?(d=a.video,O=0,n.videoWidth=d.videoWidth,n.videoHeight=d.videoHeight,e(a.videoCrop)):O=1;if(!va.m({aa:M,width:M.width,height:M.height,debug:!1,cc:c.bind(null,"GLCONTEXT_LOST"),premultipliedAlpha:!1})||!va.Sb())return c("GL_INCOMPATIBLE"),!1;
0===O&&(G(d),E());F();l();J=x.Y;c(!1);return!0},set_NN:function(a,c){if(1===K)c&&c("NN_LOADING");else{var d=function(a){K=0;c&&c(a)};K=1;ja(a,function(a){if(!a)return d("INVALID_NN");try{var c=JSON.parse(a)}catch(Ia){return d("INVALID_NN")}if(!c.exportData||!c.exportData.labels)return d("INVALID_NN");ta.reset_state();P=new Ha;P.hc(c.layers);P.jc({eb:"cpuRGBA2Float",dc:A});p.X=S.a({isFloat:!1,isPot:!1,width:P.Kb()});T=P.Nb();a=c.exportData;c=a.labels;var e="undefined"===typeof a.paramsPerLabel?!1:
a.paramsPerLabel,f=Array(c.length),g,h;for(h=0;h<T/8;++h)for(g=0;g<T;++g){var k=g+h*T;if(k>=c.length)break;var l=g;var n=8*h;var q=c[k];var r=e&&e[q]&&e[q].thresholdDetect?e[q].thresholdDetect:u.Ja;var t=a.distances&&a.distances[k]?a.distances[k]:3;f[k]={Ja:r,label:q,Bb:t,Wb:{here:l+n*T,notHere:l+(n+1)*T,yaw:l+(n+2)*T,dx:l+(n+3)*T,dy:l+(n+4)*T,ds:l+(n+5)*T}}}U=f;d(!1)},function(){d("NOTFOUND_NN")})}},reset_state:function(){Q=0;J=x.Y},detect:function(d,e,f){if(J===x.LOADING||0!==K)return N;B.N();N.label=
!1;"undefined"!==typeof f&&(I=f.thresholdDetectFactor?f.thresholdDetectFactor:1,y=f.thresholdDetectFactorUnstitch?f.thresholdDetectFactorUnstitch:1,w=f.isSkipConfirmation?!0:!1,ia=f.isKeepTracking?!0:!1,ea=f.trackingFactors?f.trackingFactors:ea);if(0===O)a.refresh();else if(1===O){if(!c){n.width=e.size.width;n.height=e.size.height;switch(f.cutShader){case "IOS":n.ua="s48";m.I("s48",[{name:"u7",type:"2f",value:[1/n.width,1/n.height]}]);break;default:n.ua="s46"}G(null);E()}a.rc(e.buffer)}d=d?d:u.$b;
for(e=0;e<d;++e)p.X.F(),m.set(n.ua),a.b(0),m.ma("u35",p.j),H.i(!1,!1),p.X.b(0),P.B(!1,p.X),B.N();B.qc();ca&&(b.viewport(0,0,M.width,M.height),m.set("s47"),a.b(0),m.ma("u35",p.j),H.i(!1,!1),R&&b.commit?b.commit():b.flush());return N},get_aspectRatio:function(){return n.width/n.height},set_scanSettings:function(a){h(z,a);E()},set_videoCrop:function(a){e(a);l()}};return ta}();
;return JEEARAPI;})();