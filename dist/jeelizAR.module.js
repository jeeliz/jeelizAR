function ka(a,c,e){var g=new XMLHttpRequest;g.open("GET",a,!0);g.withCredentials=!1;g.onreadystatechange=function(){4===g.readyState&&(200===g.status?c(g.responseText):"undefined"!==typeof e&&e(g.status))};g.send()}
function la(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function oa(a,c){var e=c%8;return a[(c-e)/8]>>7-e&1}
function ra(a){var c=JSON.parse(a);a=c.ne;var e=c.nf,g=c.n,l="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data),f=l.length,m;c=new Uint8Array(f);for(m=0;m<f;++m)c[m]=l.charCodeAt(m);l=new Float32Array(g);f=new Float32Array(e);m=a+e+1;var k,t;for(k=0;k<g;++k){var h=m*k;var r=0===oa(c,h)?1:-1;var u=h+1;var x=1,y=0;for(t=u+a-1;t>=u;--t)y+=x*oa(c,t),x*=2;t=y;u=c;x=h+1+a;y=f;var D=0,B=y.length;for(h=x;h<x+B;++h)y[D]=oa(u,h),++D;for(h=u=0;h<e;++h)u+=f[h]*Math.pow(2,-h-
1);r=0===u&&0===t?0:r*(1+u)*Math.pow(2,1+t-Math.pow(2,a-1));l[k]=r}return l}
var n=function(){function a(a,c){a=b.createShader(a);b.shaderSource(a,c);b.compileShader(a);return b.getShaderParameter(a,b.COMPILE_STATUS)?a:!1}function c(q,c){q=a(b.VERTEX_SHADER,q);c=a(b.FRAGMENT_SHADER,c);var e=b.createProgram();b.attachShader(e,q);b.attachShader(e,c);b.linkProgram(e);return e}function e(a){void 0===a.fa&&(a.fa="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===a.$&&(a.$=["a0"]);void 0===a.T&&(a.T=
[2]);if(void 0===a.precision||"highp"===a.precision)a.precision=t;a.id=m++;void 0!==a.ic&&a.ic.forEach(function(c,q){a.c=a.c.replace(c,a.na[q])});a.Ma=0;a.T.forEach(function(c){a.Ma+=4*c});a.ma=c(a.fa,"precision "+a.precision+" float;\n"+a.c);a.o={};a.f.forEach(function(c){a.o[c]=b.getUniformLocation(a.ma,c)});a.attributes={};a.aa=[];a.$.forEach(function(c){var q=b.getAttribLocation(a.ma,c);a.attributes[c]=q;a.aa.push(q)});if(a.g){b.useProgram(a.ma);f=a;l=a.id;for(var q in a.g)b.uniform1i(a.o[q],
a.g[q])}a.Wc=!0}function g(a){sa.nc(G);l!==a.id&&(G.S(),l=a.id,f=a,b.useProgram(a.ma),a.aa.forEach(function(a){0!==a&&b.enableVertexAttribArray(a)}))}var l=-1,f=!1,m=0,k=!1,t="highp",h=["u1"],r=["u0"],u={u1:0},x={u0:0},y={u1:0,u2:1},D={u3:0},B={s0:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:h,g:u},s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:h,g:u,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
f:["u1","u2"],g:y},s3:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:h,g:u},s4:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",f:["u1","mask"],g:y},s5:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:h,g:u},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
f:h,g:u},s7:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],g:x},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",f:["u0","u4"],g:x},s9:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
f:h,g:u},s10:{c:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",f:["u1","u5","u6"],g:{u1:0,u5:1}},s11:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",f:["u1","u7"],g:u},s12:{c:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
f:["u1","u8"],g:u},s13:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:r,g:x},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",f:r,g:x},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",f:r,g:x},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
f:r,g:x},s17:{c:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u6","u9"],g:{u0:0,u6:1,u9:2}},s18:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",f:r,g:x},s19:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
f:r,g:x},s20:{c:"uniform sampler2D u0;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=exp(a);}",f:["u0","u10"],g:x},s21:{c:"uniform sampler2D u0,u11;uniform float u12;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,f);float b=u12*u12;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u13","u12"],g:{u0:0,u13:1}},s22:{c:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),g=floor(u14.x*fract(b*u14.y)),f=(g*u14.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
f:["u1","u14"],g:u},s23:{c:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),e=texture2D(u16,c);gl_FragColor=d*e;}",f:["u15","u16","u17"],g:{u16:0,u15:1,u17:2}},s24:{c:"uniform float u18;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 a=fract(vv0*u18);vec4 b=texture2D(u15,vv0),c=texture2D(u16,a);gl_FragColor=b*c;}",f:["u16","u15","u18"],g:{u16:0,u15:1}},s25:{c:"uniform float u18;uniform sampler2D u15,u16,u19,u20,u21,u22;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u18,m=floor(i),c=i-m;vec4 n=texture2D(u15,vv0),d=texture2D(u16,c),a=texture2D(u22,vv0);a=a*255.;vec4 o=texture2D(u19,c),p=texture2D(u20,c),q=texture2D(u21,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
f:"u15 u16 u18 u22 u19 u20 u21".split(" "),g:{u16:0,u15:1,u22:3,u19:4,u20:5,u21:6}},s26:{c:"uniform sampler2D u15,u16,u23;uniform float u18,u24,u25,u26;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u24*vv0),g=u24*vv0-a;float b=u18/u24;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u24;float l=u24*u26/u18;vec2 m=l*c,i=(m+d*u25)/u26,e=step(i,j);vec4 n=texture2D(u15,h),o=texture2D(u16,i),p=n*o*e.x*e.y,k=texture2D(u23,h);gl_FragColor=p*u25*u25+k;}",f:"u15 u16 u18 u24 u25 u26 u23".split(" "),g:{u16:0,
u15:1,u23:2}},s27:{c:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",f:["u15","u16"],g:{u16:0,u15:1}},s28:{c:"uniform sampler2D u1,u23;uniform float u27;varying vec2 vv0;void main(){gl_FragColor=texture2D(u23,vv0)+u27*texture2D(u1,vv0);}",f:["u1","u23","u27"],g:{u1:0,u23:1}},s29:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
f:h,g:u,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
f:["u1","u2","u28"],g:y},s31:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u28,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u1,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,c).r-i/g)*j;}",f:["u1","u2","u28"],g:y},s32:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
f:["u3","u7"],g:D},s33:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u7"],g:D},s34:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
f:["u1"],g:u,precision:"lowp"},s35:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",f:["u7","u1"],g:u,precision:"lowp"},s36:{c:"uniform sampler2D u1,u29,u30;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u29,vv0),b=texture2D(u30,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
f:["u1","u29","u30"],g:{u1:0,u29:1,u30:2}}},J={s37:{c:"uniform float u18,u31;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(.01,.01);void main(){vec4 sum=texture2D(u23,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u18+eps2);float weightSize=toSparsity*u18;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u31*(xyPatch-halfFromSparsity))/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:["u18","u15","u16","u23","u31"],na:["1.1111","gl_FragColor\\*=2.2222;"]},s38:{c:"uniform float u18,u31,u26;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(.01,.01);void main(){vec4 sum=texture2D(u23,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u26,xyTo=floor(vv0*u18+eps2);float weightSize=fromSparsity*u26;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u18;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u31*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u26,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:"u18 u26 u15 u16 u23 u31".split(" "),na:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},G={Da:function(){return k},m:function(){if(!k){t="highp";for(var a in B)e(B[a],a);n.set("s0");b.enableVertexAttribArray(0);a=va.m();k=!0;return a}},pb:function(a){a.forEach(function(a){G.Pa(a)})},Pa:function(a){B[a.id]=a;e(a,a.id)},Za:function(a,c,h){c||(c=a);B[c]=Object.create(J[a]);J[a].na&&J[a].na.forEach(function(a,e){B[c].c=B[c].c.replace(new RegExp(a,"g"),h[e])});e(B[c],c)},set:function(a){g(B[a])},Hb:function(a){return"undefined"!==
typeof B[a]},Jc:function(){return f.Gc},S:function(){-1!==l&&(l=-1,f.aa.forEach(function(a){0!==a&&b.disableVertexAttribArray(a)}))},Ha:function(){var a=0;f.aa.forEach(function(c,e){e=f.T[e];b.vertexAttribPointer(c,e,b.FLOAT,!1,f.Ma,a);a+=4*e})},Fc:function(){b.enableVertexAttribArray(0)},Ia:function(){b.vertexAttribPointer(f.aa[0],2,b.FLOAT,!1,8,0)},jd:function(a,c){b.uniform1i(f.o[a],c)},G:function(a,c){b.uniform1f(f.o[a],c)},L:function(a,c,e){b.uniform2f(f.o[a],c,e)},kd:function(a,c){b.uniform2fv(f.o[a],
c)},md:function(a,c){b.uniform3fv(f.o[a],c)},ld:function(a,c,e,h){b.uniform3f(f.o[a],c,e,h)},oa:function(a,c){b.uniform4fv(f.o[a],c)},nd:function(a,c){b.uniformMatrix2fv(f.o[a],!1,c)},od:function(a,c){b.uniformMatrix3fv(f.o[a],!1,c)},pd:function(a,c){b.uniformMatrix4fv(f.o[a],!1,c)},H:function(a,c){G.set(a);c.forEach(function(a){switch(a.type){case "4f":b.uniform4fv(f.o[a.name],a.value);break;case "3f":b.uniform3fv(f.o[a.name],a.value);break;case "2f":b.uniform2fv(f.o[a.name],a.value);break;case "1f":b.uniform1f(f.o[a.name],
a.value);break;case "1i":b.uniform1i(f.o[a.name],a.value);break;case "mat2":b.uniformMatrix2fv(f.o[a.name],!1,a.value);break;case "mat3":b.uniformMatrix3fv(f.o[a.name],!1,a.value);break;case "mat4":b.uniformMatrix4fv(f.o[a.name],!1,a.value)}})}};return G}(),b=!1,wa=function(){function a(a){console.log("ERROR in ContextFeedForward : ",a);return!1}var c=!1,e=!1,g=!1,l=!1,f=!0,m=!1,k={v:function(){return c.width},K:function(){return c.height},Kc:function(){return c},Ic:function(){return b},s:function(){return f},
flush:function(){b.flush()},Lb:function(){m||(m=new Uint8Array(c.width*c.height*4));b.readPixels(0,0,c.width,c.height,b.RGBA,b.UNSIGNED_BYTE,m);return m},Mc:function(){return c.toDataURL("image/jpeg")},Nc:function(){z.I();e||(e=document.createElement("canvas"),g=e.getContext("2d"));e.width=c.width;e.height=c.height;var a=k.Lb(),h=g.createImageData(e.width,e.height),f,l,m=e.width,y=e.height,D=h.data;for(l=0;l<y;++l){var B=y-l-1;for(f=0;f<m;++f){var J=4*(l*m+f);var G=4*(B*m+f);D[J]=a[G];D[J+1]=a[G+
1];D[J+2]=a[G+2];D[J+3]=a[G+3]}}g.putImageData(h,0,0);return e.toDataURL("image/png")},Lc:function(a){!e&&a&&(e=document.createElement("canvas"),g=e.getContext("2d"));var h=a?e:document.createElement("canvas");h.width=c.width;h.height=c.height;(a?g:h.getContext("2d")).drawImage(c,0,0);return h},m:function(e){e.zb&&!e.ba?c=document.getElementById(e.zb):e.ba&&(c=e.ba);c||(c=document.createElement("canvas"));c.width=e&&void 0!==e.width?e.width:512;c.height=e&&void 0!==e.height?e.height:512;"undefined"===
typeof e&&(e={});void 0===e.premultipliedAlpha&&(e.premultipliedAlpha=!1);void 0===e.ab&&(e.ab=!0);void 0===e.antialias&&(e.antialias=!1);var h={antialias:e.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:e.premultipliedAlpha,stencil:!1,depth:e.ab},k;if(k=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream)k=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),k=12===parseInt(k[1],10);k||(b=c.getContext("webgl2",h));b?f=!0:((b=c.getContext("webgl",h))||(b=c.getContext("experimental-webgl",
h)),f=!1);if(!b)return a("WebGL is not enabled");(l=b.getExtension("WEBGL_lose_context"))&&c.addEventListener("webglcontextlost",e.ec,!1);if(!A.m())return a("Not enough capabilities");if(!A.ub()&&f)return a("Your configuration cannot process color buffer float");b.clearColor(0,0,0,0);b.disable(b.DEPTH_TEST);b.disable(b.BLEND);b.disable(b.DITHER);b.disable(b.STENCIL_TEST);b.GENERATE_MIPMAP_HINT&&b.hint(b.GENERATE_MIPMAP_HINT,b.FASTEST);b.disable(b.SAMPLE_ALPHA_TO_COVERAGE);b.disable(b.SAMPLE_COVERAGE);
return!0},Ub:function(){if(!n.m())return!1;b.depthFunc(b.LEQUAL);b.clearDepth(1);return!0}};return k}(),sa=function(){var a="undefined"===typeof n?JEShaders:n;return{nc:function(c){a!==c&&(a.S(),a=c)},Da:function(){return a.Da()},Ia:function(){a.Ia()},Ha:function(){a.Ha()},S:function(){a.S()},set:function(c){a.set(c)}}}(),L=function(){var a,c,e=0,g=-2,l=-2,f=!1,m={reset:function(){l=g=-2},m:function(){f||(a=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,a),b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,
-1,3,-1,-1,3]),b.STATIC_DRAW),c=b.createBuffer(),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c),b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),b.STATIC_DRAW),m.ta(),f=!0)},a:function(a){var c=e++,h=a.W.length,f=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,f);b.bufferData(b.ARRAY_BUFFER,a.nb instanceof Float32Array?a.nb:new Float32Array(a.nb),b.STATIC_DRAW);g=c;if(a.W){var k=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,k);if(65536>a.W.length){var m=Uint16Array;var y=b.UNSIGNED_SHORT;
var D=2}else m=Uint32Array,y=b.UNSIGNED_INT,D=4;b.bufferData(b.ELEMENT_ARRAY_BUFFER,a.W instanceof m?a.W:new m(a.W),b.STATIC_DRAW);l=c}var B={tb:function(a){g!==c&&(b.bindBuffer(b.ARRAY_BUFFER,f),g=c);a&&sa.Ha()},rb:function(){l!==c&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,k),l=c)},bind:function(a){B.tb(a);B.rb()},Dc:function(){b.drawElements(b.TRIANGLES,h,y,0)},Ec:function(a,c){b.drawElements(b.TRIANGLES,a,y,c*D)},remove:function(){b.deleteBuffer(f);a.W&&b.deleteBuffer(k);B=null}};return B},ta:function(){-1!==
g&&(b.bindBuffer(b.ARRAY_BUFFER,a),g=-1);-1!==l&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c),l=-1)},i:function(a,c){a&&L.ta();c&&sa.Ia();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},Kb:function(){b.deleteBuffer(a);b.deleteBuffer(c)}};return m}(),z=function(){var a,c,e,g=!1,l={u:-2,Ib:1};return{m:function(){if(!g){a=b.createFramebuffer();var f=A.s();c=f&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;e=f&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;g=!0}},Pc:function(){return c},Aa:function(){return e},
U:function(){return b.FRAMEBUFFER},Rc:function(){return l},Hc:function(){return a},a:function(e){void 0===e.$a&&(e.$a=!1);var f=e.Y?e.Y:!1,g=e.width,t=void 0!==e.height?e.height:e.width,h=a,r=!1,u=!1,x=0;f&&(g=g?g:f.v(),t=t?t:f.K());var y={lb:function(){u||(h=b.createFramebuffer(),u=!0,x=l.Ib++)},ob:function(){y.lb();y.l();r=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,r);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,g,t);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,
r);b.clearDepth(1)},bind:function(a,e){x!==l.u&&(b.bindFramebuffer(c,h),l.u=x);f&&f.l();e&&b.viewport(0,0,g,t);a&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},wc:function(){x!==l.u&&(b.bindFramebuffer(c,h),l.u=x)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},zc:function(){b.clear(b.COLOR_BUFFER_BIT)},Ac:function(){b.clear(b.DEPTH_BUFFER_BIT)},oc:function(){b.viewport(0,0,g,t)},l:function(){x!==l.u&&(b.bindFramebuffer(c,h),l.u=x)},rtt:function(a){f=a;l.u!==x&&(b.bindFramebuffer(b.FRAMEBUFFER,
h),l.u=x);a.l()},I:function(){b.bindFramebuffer(c,null);l.u=-1},resize:function(a,c){g=a;t=c;r&&(b.bindRenderbuffer(b.RENDERBUFFER,r),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,g,t))},remove:function(){b.bindFramebuffer(c,h);b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0);r&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null);b.bindFramebuffer(c,null);b.deleteFramebuffer(h);r&&b.deleteRenderbuffer(r);y=null}};e.$a&&y.ob();return y},I:function(){b.bindFramebuffer(c,
null);l.u=-1},sc:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.viewport(0,0,A.v(),A.K());l.u=-1},reset:function(){l.u=-2},N:function(){0!==l.u&&(b.bindFramebuffer(c,a),l.u=0)},clear:function(){b.viewport(0,0,A.v(),A.K());b.clear(b.COLOR_BUFFER_BIT)}}}(),R=function(){function a(a){b.bindTexture(b.TEXTURE_2D,a)}function c(a){N[0]=a;a=p[0];var d=a>>16&32768,c=a>>12&2047,e=a>>23&255;return 103>e?d:142<e?d|31744|((255==e?0:1)&&a&8388607):113>e?(c|=2048,d|(c>>114-
e)+(c>>113-e&1)):d=(d|e-112<<10|c>>1)+(c&1)}function e(a){var d=new Uint16Array(a.length);a.forEach(function(a,e){d[e]=c(a)});return d}function g(){if(null!==P.Ba)return P.Ba;var a=f(e([1,1,1,1]));return null===a?!0:P.Ba=a}function l(){if(null!==P.Ca)return P.Ca;var a=f(new Uint8Array([255,255,255,255]));return null===a?!0:P.Ca=a}function f(a){if(!sa.Da()||!D)return null;a=K.a({isFloat:!1,D:!0,array:a,width:1});z.I();b.viewport(0,0,1,1);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);sa.set("s0");
a.Qa(0);L.i(!1,!0);var d=new Uint8Array(4);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,d);d=.9<d[0];a.remove();z.N();return d}var m=0,k,t=0,h,r=!1,u,x,y,D=!1,B=!1,J,G,q,I=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],T=!1,S=!1,N=new Float32Array(1),p=new Int32Array(N.buffer),P={Ba:null,Ca:null},K={m:function(){if(!D){x=[b.RGB,!1,b.RGB,b.RGBA];y=[b.RGB,!1,b.RGB,b.RGBA];k=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7];T="undefined"!==typeof JEContext;S="undefined"!==
typeof A;T&&JEContext.bd()&&k.push(b.TEXTURE8,b.TEXTURE9);h=[-1,-1,-1,-1,-1,-1,-1,-1];u=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT];if(!r){for(var a=new Float32Array(16384),c=0;16384>c;++c)a[c]=2*Math.random()-1;r={random:K.a({isFloat:!0,isPot:!0,array:a,width:64}),mb:K.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}D=!0}},Tb:function(){K.uc()},Uc:function(){return r.mb},uc:function(){u[1]=A.ha()},kc:function(){y=x=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},dd:function(a,c){n.set("s1");z.I();var d=a.v(),
e=a.K();b.viewport(0,0,d,e);a.b(0);L.i(!1,!1);b.readPixels(0,0,d,e,b.RGBA,b.UNSIGNED_BYTE,c)},Jb:function(d,c,e){b.activeTexture(b.TEXTURE0);m=0;var g=b.createTexture();a(g);var f=A.s()&&b.RGBA32F?b.RGBA32F:b.FLOAT;c=c instanceof Float32Array?c:new Float32Array(c);var h=Math.log(c.length)/Math.log(2);h!==Math.floor(h)&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);
b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,e);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,d.v(),d.K(),0,b.RGBA,f,c);a(null);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);z.N();n.set("s0");d.F();b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);a(g);L.i(!0,!1);b.deleteTexture(g)},a:function(d){function c(){a(v);ea&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,ea);d.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,d.cb?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_WRAP_T,d.O?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));d.ja&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.Oc().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.vc);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,d.isLinear?b.LINEAR:b.NEAREST);d.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,d.isMipmap&&!ha?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_MIN_FILTER,d.isMipmap&&!ha?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);V=x[d.ea-1];X=y[d.ea-1];Y=u[f];if(A.s()){var c=b.RGBA32F;V===b.RGBA&&Y===b.FLOAT&&c&&(X=c);V===b.RGB&&Y===b.FLOAT&&c&&(X=c,V=b.RGBA)}if(d.D&&!d.isFloat||d.isFloat&&d.isMipmap&&va.Wb())(c=b.RGBA16F)&&(X=c),Y=A.ha();d.fb&&"undefined"!==typeof b.texStorage2D&&(pa=d.fb);d.eb&&4===d.ea&&(V=JEContext.Sc());if(d.A)b.texImage2D(b.TEXTURE_2D,0,X,V,Y,d.A);else if(d.url)b.texImage2D(b.TEXTURE_2D,0,X,V,Y,ba);else if(F){try{b.texImage2D(b.TEXTURE_2D,
0,X,w,C,0,V,Y,F),b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,X,w,C,0,V,Y,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,w,C,0,b.RGBA,b.UNSIGNED_BYTE,null))}catch(Ja){b.texImage2D(b.TEXTURE_2D,0,X,w,C,0,V,Y,null)}d.isKeepArray||(F=null)}else b.texImage2D(b.TEXTURE_2D,0,X,w,C,0,V,Y,null);if(d.isMipmap)if(!ha&&M)M.za(),qa=!0;else if(ha){c=Math.log(Math.min(w,C))/Math.log(2);var e;ma=Array(1+c);ma[0]=v;for(e=1;e<=c;++e){var W=Math.pow(2,e);var g=w/W;W=C/W;var l=b.createTexture();
a(l);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,X,g,W,0,V,Y,null);a(null);ma[e]=l}qa=!0}a(null);h[m]=-1;ea&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);fa=!0;O&&M&&(O(M),O=!1)}"undefined"===typeof d.isFloat&&(d.isFloat=!1);"undefined"===typeof d.D&&(d.D=!1);"undefined"===typeof d.isPot&&(d.isPot=!0);"undefined"===typeof d.isLinear&&(d.isLinear=!1);"undefined"===typeof d.isMipmap&&(d.isMipmap=!1);
"undefined"===typeof d.ua&&(d.ua=!1);void 0===d.ja&&(d.ja=!1);void 0===d.O&&(d.O=!1);void 0===d.cb&&(d.cb=!1);void 0===d.eb&&(d.eb=!1);void 0===d.ea&&(d.ea=4);void 0===d.bb&&(d.bb=!1);"undefined"===typeof d.isFlipY&&(d.isFlipY=d.url||d.array?!0:!1);"undefined"===typeof d.isKeepArray&&(d.isKeepArray=!1);d.data&&(d.array="string"===typeof d.data?ra(d.data):d.isFloat?new Float32Array(d.data):new Uint8Array(d.data),d.isFlipY=!1);var f=0,p=d.A?!0:!1,r=null,D=null,P=!1,Z=null;d.isFloat&&(d.D=!0);d.D&&(f=
1);d.bb||A.s()||!d.isFloat||!S||A.Sa()||(d.isFloat=!1);d.isFloat&&(f=2);d.ja&&T&&!JEContext.Xc()&&(d.ja=!1);var v=b.createTexture(),O=d.ua,ba=null,F=!1,w=0,C=0,fa=!1,ia=t++,ja=!1,N,da,W,na,X,V,Y,ea=d.isFlipY,ha=d.D&&d.isMipmap&&"undefined"!==typeof va&&!va.wb()?!0:!1,ma,pa=-1,qa=!1;"undefined"!==typeof d.width&&d.width&&(w=d.width,C="undefined"!==typeof d.height&&d.height?d.height:w);var M={get:function(){return v},v:function(){return w},K:function(){return C},Vc:function(){return d.url},Yc:function(){return d.isFloat},
$c:function(){return d.D},ad:function(){return d.isLinear},za:function(){b.generateMipmap(b.TEXTURE_2D)},Ra:function(c,d){ha?(c||(c=M.Xa()),M.sa(d),a(ma[c]),h[d]=-1):M.b(d)},Xa:function(){-1===pa&&(pa=Math.log(w)/Math.log(2));return pa},Wa:function(c){if(ha){c||(c=M.Xa());n.set("s11");M.sa(0);var d,e=w,W=C;for(d=1;d<=c;++d)e/=2,W/=2,n.L("u7",.25/e,.25/W),b.viewport(0,0,e,W),a(ma[d-1]),b.framebufferTexture2D(z.U(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,ma[d],0),L.i(!1,1===d);h[0]=-1}else M.za()},sa:function(a){a!==
m&&(b.activeTexture(k[a]),m=a)},b:function(c){if(!fa)return!1;M.sa(c);if(h[c]===ia)return!1;a(v);h[c]=ia;return!0},Qa:function(c){b.activeTexture(k[c]);m=c;a(v);h[c]=ia},l:function(){b.framebufferTexture2D(z.U(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,v,0)},F:function(){b.viewport(0,0,w,C);b.framebufferTexture2D(z.U(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,v,0)},sd:function(){b.framebufferTexture2D(z.U(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},resize:function(a,d){w=a;C=d;c()},clone:function(a){a=K.a({width:w,
height:C,D:d.D,isFloat:d.isFloat,isLinear:d.isLinear,O:d.O,isFlipY:a?!ea:ea,isPot:d.isPot});sa.set("s0");z.N();a.l();b.viewport(0,0,w,C);M.b(0);L.i(!0,!0);return a},oc:function(){b.viewport(0,0,w,C)},remove:function(){b.deleteTexture(v);M=null},refresh:function(){M.Qa(0);ea&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);p?b.texImage2D(b.TEXTURE_2D,0,X,V,b.UNSIGNED_BYTE,d.A):b.texImage2D(b.TEXTURE_2D,0,X,w,C,0,V,Y,F);ea&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Ta:function(){var a=w*C*4;da=[new Uint8Array(a),
new Uint8Array(a),new Uint8Array(a),new Uint8Array(a)];N=[new Float32Array(da[0].buffer),new Float32Array(da[1].buffer),new Float32Array(da[2].buffer),new Float32Array(da[3].buffer)];W=new Uint8Array(4*a);na=new Float32Array(W.buffer);ja=!0},jb:function(){ja||M.Ta();b.readPixels(0,0,w,4*C,b.RGBA,b.UNSIGNED_BYTE,W);var a,c=w*C,d=2*c,e=3*c;for(a=0;a<c;++a)N[0][a]=na[a],N[1][a]=na[a+c],N[2][a]=na[a+d],N[3][a]=na[a+e];return N},Ua:function(){z.I();n.set("s12");M.b(0);for(var a=0;4>a;++a)b.viewport(0,
C*a,w,C),n.oa("u8",I[a]),L.i(!1,0===a)},tc:function(c){var d=Y===u[0]&&!l();a(v);ea&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,ea);d?(P||(r=document.createElement("canvas"),r.width=w,r.height=C,D=r.getContext("2d"),Z=D.createImageData(w,C),P=!0),Z.data.set(c),D.putImageData(Z,0,0),b.texImage2D(b.TEXTURE_2D,0,X,V,Y,r)):b.texImage2D(b.TEXTURE_2D,0,X,w,C,0,V,Y,c);h[m]=ia;ea&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},td:function(c,d){a(v);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,d);b.texImage2D(b.TEXTURE_2D,0,X,
V,Y,c);h[m]=ia;d&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},fd:function(a,c){var e=w*C,W=4*e;a=d.D?a?"RGBE":"JSON":"RGBA";c&&(a=c);c=A.s()&&!1;switch(a){case "RGBE":var g="s39";break;case "JSON":g=c?"s0":"s12";break;case "RGBA":case "RGBAARRAY":g="s6"}ja||("RGBA"===a||"RGBE"===a||"RGBAARRAY"===a?(da=new Uint8Array(W),ja=!0):"JSON"!==a||c||M.Ta());z.I();n.set(g);M.b(0);if("RGBA"===a||"RGBE"===a||"RGBAARRAY"===a){b.viewport(0,0,w,C);L.i(!0,!0);b.readPixels(0,0,w,C,b.RGBA,b.UNSIGNED_BYTE,da);if("RGBAARRAY"===
a)return{data:da};B||(J=document.createElement("canvas"),G=J.getContext("2d"),B=!0);J.width=w;J.height=C;q=G.createImageData(w,C);q.data.set(da);G.putImageData(q,0,0);var f=J.toDataURL("image/png")}else if("JSON"===a)if(c)f=new Float32Array(e),b.viewport(0,0,w,C),L.i(!0,!0),b.readPixels(0,0,w,C,b.RGBA,b.FLOAT,f);else{for(f=0;4>f;++f)b.viewport(0,C*f,w,C),n.oa("u8",I[f]),L.i(!f,!f);M.jb();f=Array(e);for(g=0;g<e;++g)f[4*g]=N[0][g],f[4*g+1]=N[1][g],f[4*g+2]=N[2][g],f[4*g+3]=N[3][g]}return{format:a,data:f,
width:w,height:C,isMirrorY:d.O,isFlipY:"RGBA"===a?d.isFlipY:!d.isFlipY}}};d.isMipmap&&!ha&&fa&&!qa&&(M.za(),qa=!0);if(d.url)a(v),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),ba=new Image,ba.Cc="Anonymous",ba.crossOrigin="Anonymous",ba.src=d.url,ba.onload=function(){w=ba.width;C=ba.height;c()};else if(d.A){var ua=function(){w=void 0!==d.A.videoWidth?d.A.videoWidth:d.A.width;C=void 0!==d.A.videoHeight?d.A.videoHeight:d.A.height;w?c():setTimeout(ua,1)};ua()}else d.array?(d.D&&
!d.isFloat?d.array instanceof Uint16Array?(F=d.array,c()):g()?(F=e(d.array),c()):(c(),K.Jb(M,d.array,ea)):(F=d.isFloat?d.array instanceof Float32Array?d.array:new Float32Array(d.array):d.array instanceof Uint8Array?d.array:new Uint8Array(d.array),c()),d.isKeepArray||(F&&F!==d.array&&(F=null),delete d.array)):c();M.Qb=M.v;O&&fa&&(O(M),O=!1);return M},I:function(c){c!==m&&(b.activeTexture(k[c]),m=c);h[c]=-1;a(null)},xc:function(a){r.random.b(a)},reset:function(){for(var a=0;a<k.length;++a)h[a]=-1;m=
-1},ed:function(){m=-1},qd:function(){for(var a=0;a<k.length;++a)K.I(a)},Kb:function(){r&&(r.random.remove(),r.mb.remove())},rd:function(a,c){if("RGBA"===a.format||"RGBE"===a.format){var d=new Image;d.src=a.data;d.onload=function(){K.a({O:a.isMirrorY,isFlipY:a.isFlipY,isFloat:!1,A:d,ua:function(d){if("RGBA"===a.format)c(d);else{var e=a.width,g=a.height,f=K.a({O:a.isMirrorY,isFloat:!0,width:e,height:g,isFlipY:a.isFlipY});z.N();b.viewport(0,0,e,g);n.set("s40");f.l();d.b(0);L.i(!0,!0);K.I(0);c(f);b.flush();
setTimeout(d.remove,50)}}})}}else"JSON"===a.format?c(K.a({isFloat:!0,isFlipY:a.isFlipY,width:a.width,height:a.height,array:new Float32Array(a.data)})):c(!1)}};return K}(),A=function(){function a(){c="undefined"===typeof wa?JEContext:wa;e=!0}var c,e=!1,g=!1,l=!1,f=!1,m=!1,k=!1,t=!1,h=!1,r=!1,u=!1,x=!1,y=!0,D=!0,B=!0,J,G="undefined"===typeof window?{}:window,q={m:function(){if(e)return!0;a();q.Va();q.ya();q.Fb();q.Gb();z.m();R.m();if(!q.Ab())return!1;L.m();R.Tb();return!0},v:function(){e||a();return c.v()},
K:function(){e||a();return c.K()},s:function(){e||a();return c.s()},Fb:function(){x=(u=b.getExtension("EXT_color_buffer_float")||b.getExtension("WEBGL_color_buffer_float")||b.getExtension("OES_color_buffer_float"))?!0:!1;G.GL_EXT_COLORBUFFERFLOAT=u},Gb:function(){b.getExtension("EXT_color_buffer_half_float")||b.getExtension("WEBGL_color_buffer_half_float")||b.getExtension("OES_color_buffer_half_float")},Va:function(){if(!g){this.s()||(l=b.getExtension("OES_texture_float")||b.getExtension("MOZ_OES_texture_float")||
b.getExtension("WEBKIT_OES_texture_float"),m=(G.GL_EXT_FLOAT=l)?!0:!1);if(m||this.s())f=b.getExtension("OES_texture_float_linear")||b.getExtension("MOZ_OES_texture_float_linear")||b.getExtension("WEBKIT_OES_texture_float_linear"),G.GL_EXT_FLOATLINEAR=f;g=!0}},ya:function(){if(!r){if(!this.s()){if(k=b.getExtension("OES_texture_half_float")||b.getExtension("MOZ_OES_texture_half_float")||b.getExtension("WEBKIT_OES_texture_half_float"))J=k.HALF_FLOAT_OES,t=!0;G.GL_EXT_HALFFLOAT=k}if(t||this.s())h=b.getExtension("OES_texture_half_float_linear")||
b.getExtension("MOZ_OES_texture_half_float_linear")||b.getExtension("WEBKIT_OES_texture_half_float_linear"),G.GL_EXT_HALFFLOATLINEAR=h;r=!0}},ha:function(){if(q.s())return b.HALF_FLOAT;q.ya();return t?J:b.FLOAT},Sa:function(){return y},vb:function(){return D},yc:function(){return B},ub:function(){return x},Cb:function(){D=y=!0;var a=b.createFramebuffer();b.bindFramebuffer(b.FRAMEBUFFER,a);var c=b.createTexture();b.bindTexture(b.TEXTURE_2D,c);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);
b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,q.s()&&b.RGBA32F?b.RGBA32F:b.RGBA,1,1,0,b.RGBA,b.FLOAT,null);b.framebufferTexture2D(z.U(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,c,0);var e=b.checkFramebufferStatus(z.Aa());e!==b.FRAMEBUFFER_COMPLETE&&(y=!1);b.texImage2D(b.TEXTURE_2D,0,q.s()&&b.RGBA16F?b.RGBA16F:b.RGBA,1,1,0,b.RGBA,q.ha(),null);b.framebufferTexture2D(z.U(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,c,0);e=b.checkFramebufferStatus(z.Aa());e!==b.FRAMEBUFFER_COMPLETE&&
(D=!1);b.bindTexture(b.TEXTURE_2D,null);b.bindFramebuffer(b.FRAMEBUFFER,null);b.deleteTexture(c);b.deleteFramebuffer(a)},Bb:function(){var a=z.a({width:1});a.lb();var c=R.a({width:1,isFloat:!0,ea:3});a.l();c.l();b.flush();b.checkFramebufferStatus(z.Aa())!==b.FRAMEBUFFER_COMPLETE?(R.kc(),B=!1):B=!0;a.remove();c.remove()},Ab:function(){q.Cb();if(!y&&!D)return!1;q.Bb();return!0}};return q}(),va=function(){var a=!1,c=[.8,1,.8,1],e=0,g,l=new Uint8Array(4),f=c.concat(c,c,c),m=!0,k={m:function(){function c(a,
c,e,g){b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,g?b.NEAREST_MIPMAP_NEAREST:b.LINEAR);try{var f=b.getError();f!==b.NO_ERROR&&console.log("GLERR in test_mipmapping() :",f);b.texImage2D(b.TEXTURE_2D,0,a,2,2,0,b.RGBA,c,e);f=b.getError();if(f!==b.NO_ERROR)return!1}catch(I){return!1}g&&b.generateMipmap(b.TEXTURE_2D);L.ta();L.i(!1,!0);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,l);f=b.getError();f===b.INVALID_OPERATION&&"undefined"!==typeof b.PIXEL_PACK_BUFFER&&(b.bindBuffer(b.PIXEL_PACK_BUFFER,
null),b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,l),f=b.getError());return f!==b.NO_ERROR?!1:0!==l[0]}function h(a){return A.Sa()&&c(u,b.FLOAT,new Float32Array(f),a)?(e=3,!0):!1}function k(a){return A.vb()?c(x,A.ha(),new Uint16Array(f),a)||c(x,b.FLOAT,new Float32Array(f),a)?(e=2,!0):!1:!1}A.Va();A.ya();var u=b.RGBA,x=b.RGBA;if(wa.s()){var y=b.RGBA32F;y&&(u=y);(y=b.RGBA16F)&&(x=y)}L.m();z.reset();z.I();b.viewport(0,0,1,1);n.set("s0");a=!0;g=b.createTexture();b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,
g);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.REPEAT);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.REPEAT);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);if(k(!0)||h(!0))return!0;m=!1;if(k(!1)||h(!1))return!0;if(wa.s()){x=u=b.RGBA;if(k(!0)||h(!0))return!0;m=!1;if(k(!1)||h(!1))return!0}return!1},wb:function(){return m},Qc:function(){return e},Zc:function(){a||k.m();return 3===e},Wb:function(){a||k.m();return 2===e}};return k}(),xa={a:function(a){var c=R.a(a.alpha),e=R.a(a.beta);
return{Eb:function(){c.b(1);e.b(2)}}}},Aa={a:function(a){var c=a.pc;c.index=a.index;c.P=a.P;c.parent=a.parent;switch(c.type){case "input":a=ya.a(c);break;default:a=za.a(c)}return a}},ya={a:function(a){"undefined"===typeof a.sift&&(a.sift=!1);"undefined"===typeof a.DWT&&(a.DWT=!1);"undefined"===typeof a.blur&&(a.blur=!1);"undefined"===typeof a.siftOutWidth&&(a.siftOutWidth=!1);"undefined"===typeof a.filterBank&&(a.filterBank=!1);"undefined"===typeof a.poolType&&(a.poolType="max");"undefined"===typeof a.postpreprocessing&&
(a.postpreprocessing="copy");"undefined"===typeof a.density&&(a.density=1);a.filterBank&&(FilterBank.hd(a.poolType,a.postpreprocessing),FilterBank.gd(a.density));var c=!1;if(a.mask){c=!0;SETTINGS&&void 0!==SETTINGS.qb&&(a.mask=SETTINGS.qb+a.mask);var e=R.a({isFloat:!1,url:a.mask})}var g=!1,l="undefined"!==typeof a.preprocessing?a.preprocessing:!1,f=!1;a.sift?Sift.m({Sb:b,ba:!1,width:a.size,cd:a.siftOutWidth}):a.DWT&&DWT.m({Sb:b,ba:!1,width:a.size});var m=!1;a.customInputShader&&(m="s41",n.Pa({name:"_",
id:m,c:a.customInputShader,f:["uSource"],precision:"lowp"}),n.H(m,[{type:"1i",name:"_",value:0}]));switch(l){case "sobel":var k="s30";f=!0;break;case "meanNormalization":k="s31";f=!0;break;case "grayScale":k="s29";f=!1;break;case "copy":k="s0";break;case "inputLightRegulation":k=m?m:"s29";Ba.m({width:a.size,gb:a.nBlurPass,Vb:!1});g=!0;break;case "direct":case "none":k=!1;break;default:k="s3"}c&&(k+="Mask");if(a.blur)var t=R.a({isFloat:!1,isPot:!1,width:a.size});var h=R.a({isFloat:!1,isPot:!1,width:a.size}),
r={v:function(){return a.sift?Sift.V():a.filterBank?FilterBank.V():a.size},V:function(){return r.v()},Ob:function(){return a.sift?Sift.da():a.DWT?DWT.da():a.filterBank?FilterBank.da():g?Ba.da():h},B:function(){z.N();a.blur&&(t.F(),n.set("s42"),n.L("u7",1/a.size,1/a.size),L.i(!1,!0),t.b(0));k&&(n.set(k),f&&n.G("u28",1/a.size),h.F(),c&&e.b(1),L.i(!1,!1),h.b(0),g?Ba.la(h):a.sift?(n.S(),Sift.la()):a.DWT?(n.S(),DWT.la(4)):a.filterBank&&(n.S(),FilterBank.la(h)))}};return r}},za={a:function(a){"undefined"===
typeof a.disableNormalize&&(a.disableNormalize=!1);var c=[],e=[],g,l,f=!1,m,k=!0,t,h,r=a.isReorganize?a.isReorganize:!1,u=a.kernelsNumber?!0:!1,x=a.dynPelu?xa.a(a.dynPelu):!1,y=x?!0:!1,D={isEnabled:!1},B;if("softmax"===a.type){a.activation="softmax";a.size=Math.pow(2,Math.ceil(Math.log(Math.sqrt(a.num_classes))/Math.log(2)));a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.P.V();a.gain="undefined"!==typeof a.gain?a.gain:1;n.H("s20",[{type:"1f",name:"u10",value:a.gain}]);var J=R.a({isFloat:!0,
isPot:!1,width:a.size}),G=R.a({isFloat:!0,isPot:!1,width:a.size,isMipmap:!0});k=!1;var q=new Uint8Array(Math.pow(4*a.size,2)),I;for(I=0;I<a.size*a.size;++I){var T=I<a.num_classes?255:0;q[4*I]=T;q[4*I+1]=T;q[4*I+2]=T;q[4*I+3]=T}var S=R.a({isFloat:!1,isPot:!1,width:a.size,array:q})}else a.cost?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.P.V(),k=!1):"full"===a.connectivityUp&&(a.sparsity=a.P.V());var N={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",
softmax:"s20",dynPelu:"s17"}[a.activation],p=a.sparsity*a.sparsity,P=!1,K=a.size;if(a.maxPooling){switch(a.maxPooling.size){case 2:var d="s32";break;case 4:d="s33"}P=!0;K/=a.maxPooling.size;var H=R.a({isFloat:!0,isPot:!1,width:K})}var E=void 0!==a.dc&&a.dc?!0:!1,aa=null,U=null,Q=null;E&&(aa="s43"+a.index.toString(),n.Za("s43",aa,[((a.normalization.n-1)/2).toFixed(1)]),n.H(aa,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/a.size,1/a.size]},{type:"1f",name:"u6",value:a.normalization.alpha},
{type:"1f",name:"u9",value:a.normalization.beta},{type:"1f",name:"u32",value:a.normalization.k}]),U=R.a({isFloat:!0,isPot:!0,width:a.size}),Q=R.a({isFloat:!0,isPot:!0,width:a.size}));var ca,Z,v,O;k&&(O=R.a({isFloat:!0,isPot:!1,width:a.size}));var ba=R.a(a.bias),F,w={v:function(){return a.size},V:function(){return K},Ya:function(){return a.num_classes},sb:function(a){B.b(a)},gc:function(){a.remap&&a.remap.isEnabled&&(D={isEnabled:!0,Zb:R.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),
width:a.remap.maskTexture.width,isPot:!1}),layers:a.remap.layers.map(function(c){return a.parent.Nb(c)}),depth:a.remap.depth})},mc:function(){switch(a.connectivityUp){case "gaussian":F=Ca.a(a.connectivity);break;case "direct":F=Da.a(a.connectivity);break;case "square":F=Ea.a(a.connectivity);break;case "squareFast":F=Fa.a(a.connectivity,a.activation);break;case "full":F=Ga.a(a.connectivity);break;case "conv":h=a.kernelsNumber,F=Ha.a(a.connectivity),r&&(t=R.a({width:K,isFloat:!0,isFlipY:!1,isPot:!1}))}if(F.R){var c=
a.size*a.sparsity;Z=Math.log(c/a.size)/Math.log(2);ca=R.a({isMipmap:!0,isFloat:!0,isPot:!0,width:c,fb:Z});v=R.a({isFloat:!0,isPot:!0,width:a.size})}},B:function(c,e){B=c;F.R?(ca.F(),u&&ba.b(2),F.B(D),ca.b(0),ca.Wa(Z),v.F(),u?n.set("s0"):(n.set("s28"),n.G("u27",p),ba.b(1)),ca.Ra(Z,0),L.i(!1,!1),n.set(N),E?U.l():O.l(),v.b(0),y&&x.Eb(),L.i(!1,!1)):(O.F(),ba.b(1),F.B());E&&(n.set(aa),Q.l(),U.b(0),L.i(!1,!1),n.set("s44"),n.G("u6",1),O.l(),Q.b(1),L.i(!1,!1));if(k)return P?(H.F(),O.b(0),n.set(d),n.L("u7",
1/a.size,1/a.size),L.i(!1,!1),e=H):e=O,e.b(0),r&&(t.l(),n.set("s22"),n.L("u14",h,K/h),L.i(!1,!1),e=t,t.b(0)),e;if("softmax"===a.type){n.set("s20");O.b(0);J.l();L.i(!1,!1);a.disableNormalize?c=J:(n.set("s2"),J.b(0),S.b(1),G.l(),L.i(!1,!1),n.set("s0"),l.F(),G.b(0),G.Wa(!1),L.i(!1,!1),n.set("s21"),g.F(),G.Ra(!1,0),n.G("u12",O.Qb()),l.b(1),L.i(!1,!1),c=g);if(e){switch(f){case "cpuRGBAAvg":break;default:var q=w.ib(c)}return q}return!1}if(a.cost){n.set("gpuRawAvg"===f?"s8":"s7");e=O;a.disableNormalize||
(n.G("u4",1/a.size),g.F(),O.b(0),L.i(!1,!1),e=g);switch(f){case "cpuRGBA2Float":e.Ua();q=w.ib(e);m(q);break;case "gpuRawAvg":case "gpuRaw":e.b(0),m(e)}return!1}},yb:function(d){d&&"undefined"!==typeof d.hb&&(f=d.hb,m=d.fc);O=R.a({isFloat:!0,isPot:!0,isMipmap:"softmax"===a.type,width:a.size});"softmax"===a.type&&(l=R.a({isFloat:!0,isPot:!0,width:1}));var h=0,k=0,p="undefined"!==typeof a.num_classes&&a.num_classes?a.num_classes:a.size*a.size;for(d=0;d<p;++d)c.push(h+(a.size-1-k)*a.size),e.push([-1,
-1,-1,-1]),++h,h===a.size&&(h=0,++k);a.disableNormalize||(g=R.a({isFloat:!0,isPot:!0,width:a.size}))},ib:function(a){a.Ua();var d=a.jb();c.forEach(function(a,c){e[c][0]=d[0][a];e[c][1]=d[1][a];e[c][2]=d[2][a];e[c][3]=d[3][a]});return e}};a.P&&w.mc(a.P);return w}};
function Ia(){var a,c,e,g;a||(a={});this.Nb=function(a){return c[a]};this.jc=function(a){var f=!1;c=a.map(function(a,c){return f=a=Aa.a({index:c,parent:this,pc:a,P:f})});e=c[0];g=c[c.length-1];c.forEach(function(a,c){0!==c&&a.gc()})};this.B=function(a,e){var f=e;c.forEach(function(c){f=c.B(f,a)});return f};this.Mb=function(){return e.v()};this.Pb=function(){return g.v()};this.da=function(){return g.Ob()};this.lc=function(a){g.yb(a)};this.Ya=function(){return g.Ya()}}
var Da={a:function(a){var c=R.a(a.weights);delete a.weights.data;return{R:!0,ca:function(){return 1},Rb:function(){return c},B:function(){n.set("s27");c.b(1);L.i(!1,!1)}}}},Ga={a:function(a){var c=a.fromLayerSize,e=R.a(a.weights);return{R:!0,ca:function(){return c},B:function(c){if(c.isEnabled){n.set("s25");c.Zb.b(3);var g,f=Math.min(c.layers.length,c.depth);for(g=0;g<f;++g)c.layers[g].sb(4+g)}else n.set("s24");n.G("u18",a.toLayerSize);e.b(1);L.i(!1,!1)}}}},Ca={a:function(a){var c=a.toSparsity*a.toLayerSize,
e=c/a.fromLayerSize,g=R.a(a.weights);R.a({width:c,isFloat:!0,array:new Float32Array(a.fromBindings),isPot:!0});var l=R.a({width:c,isFloat:!0,array:new Float32Array(a.toBindings),isPot:!0});return{R:!0,ca:function(){return e},B:function(){n.set("s23");g.b(1);l.b(2);L.i(!1,!0)}}}},Ea={a:function(a){var c=a.fromLayerSize,e=a.toLayerSize,g=a.toSparsity,l=g*e,f=l/c,m=c/e,k,t,h,r,u=0,x=0,y=0,D=Array(g*e*g*e*4),B=Array(g*e*g*e*4),J=Array(c*c);for(k=0;k<J.length;++k)J[k]=0;var G=Math.floor(g/2),q=.5/e,I=
.5/c,T=.5/l;for(k=0;k<e;++k)for(t=0;t<e;++t){var S=Math.round(k*m);var N=Math.round(t*m);var p=k/e;var P=t/e;p+=q;P+=q;for(h=0;h<g;++h)for(r=0;r<g;++r){var K=u/l;var d=x/l;var H=S+h-G;var E=N+r-G;0>H&&(H+=c);0>E&&(E+=c);H>=c&&(H-=c);E>=c&&(E-=c);var aa=H/c;var U=E/c;d=1-d-1/l;aa+=I;U+=I;K+=T;d+=T;var Q=k*g+h,ca=t*g+r;ca=e*g-ca-1;Q=ca*e*g+Q;D[4*Q]=K;D[4*Q+1]=d;D[4*Q+2]=aa;D[4*Q+3]=U;aa=J[E*c+H]++;U=aa%f;H=H*f+U;E=E*f+(aa-U)/f;E=c*f-1-E;E=E*c*f+H;B[4*E]=K;B[4*E+1]=d;B[4*E+2]=p;B[4*E+3]=P;++u>=l&&(u=
0,++x);++y}}var Z=R.a(a.weights);R.a({width:l,isFloat:!0,array:new Float32Array(B),isPot:!0});B=null;var v=R.a({width:l,isFloat:!0,array:new Float32Array(D),isPot:!0});D=null;return{R:!0,ca:function(){return f},B:function(){n.set("s23");Z.b(1);v.b(2);L.i(!1,!1)}}}},Ha={a:function(a){var c=a.kernelsNumber,e=a.toSparsity,g=e*a.toLayerSize/a.fromLayerSize,l=R.a(a.weights);return{R:!0,ca:function(){return g},Tc:function(){return e},Rb:function(){return l},B:function(){n.set("s26");n.G("u24",c);n.G("u25",
e);n.G("u18",a.toLayerSize);n.G("u26",a.fromLayerSize);l.b(1);L.i(!1,!1)}}}},Fa={a:function(a,c){var e=a.fromLayerSize,g=a.toLayerSize,l=a.toSparsity,f=a.stride?a.stride:1,m=l*g/e,k=g<e,t=e/g,h=R.a(a.weights),r="s45"+[e.toString(),g.toString(),l.toString(),f.toString(),c].join("_");n.Hb(r)||(a=la(c),g=[{type:"1f",name:"u18",value:g},{type:"1f",name:"u31",value:f}],k&&g.push({type:"1f",name:"u26",value:e}),e=[(k?m:l).toFixed(1),a],k&&e.push(t.toFixed(1)),n.Za(k?"s38":"s37",r,e),n.H(r,g.concat([{type:"1i",
name:"u16",value:0},{type:"1i",name:"u23",value:1},{type:"1i",name:"u15",value:3}])));return{R:!1,ca:function(){return m},B:function(){n.set(r);h.b(3);L.i(!1,!1)}}}},Ba=function(){var a,c,e,g,l,f,m,k,t;return{m:function(h){a=h.gb?h.gb:3;c=h.width?h.width:64;g=h.Vb?!0:!1;h={isFloat:!1,width:c,isPot:!1,isFlipY:!1};l=R.a(h);f=R.a(h);m=R.a(h);k=R.a(h);t=R.a({isFloat:!0,width:c,isPot:!1,isFlipY:!1});e=1/c},la:function(c){n.set("s35");for(var h=0;h<a;++h)l.l(),n.L("u7",e,0),L.i(g,!1),f.l(),l.b(0),n.L("u7",
0,e),L.i(g,!1),f.b(0);n.set("s34");k.l();c.b(0);L.i(g);n.set("s35");for(h=0;h<a;++h)m.l(),k.b(0),n.L("u7",e,0),L.i(g,!1),k.l(),m.b(0),n.L("u7",0,e),L.i(g,!1);n.set("s36");t.l();c.b(0);f.b(1);k.b(2);L.i(g,!1);t.b(0)},da:function(){return t}}}();
window.JEEARAPI=function(){var a,c,e,g;function l(a,c){for(var d in a)"undefined"!==typeof c[d]&&(a[d]=c[d])}function f(a){if(a){var c=a.w,d=a.h;p.J.va[0]=-1+2*(a.x+c/2)/p.videoWidth;p.J.va[1]=-1+2*(a.y+d/2)/p.videoHeight;p.J.scale[0]=c/p.videoWidth;p.J.scale[1]=d/p.videoHeight}p.width=p.videoWidth*p.J.scale[0];p.height=p.videoHeight*p.J.scale[1]}function m(){var a=[{type:"2f",name:"u33",value:p.J.va},{type:"2f",name:"u34",value:p.J.scale}];n.H("s47",a);n.H("s48",a)}function k(a,c,e){var f=e[1]*h(a,
c,"dy")*p.X[1],g=e[2]*h(a,c,"ds"),W=d.j[2],k=d.j[3];d.j[0]-=e[0]*h(a,c,"dx")*p.X[0]*W*q.xa[0];d.j[1]-=f*k*q.xa[1];d.j[2]-=g*W*q.xa[2];d.j[2]=Math.min(Math.max(d.j[2],q.kb[0]*p.X[0]),q.kb[1]*p.X[0]);d.j[0]=Math.min(Math.max(d.j[0],0),1);d.j[3]=d.j[2]*p.aspectRatio/p.ia;d.j[1]=Math.min(Math.max(d.j[1],0),1)}function t(a){var c=d.j[2],e=d.j[3],f=(2*Math.random()-1)*a,g=(2*Math.random()-1)*a;d.j[0]+=(2*Math.random()-1)*a*c;d.j[1]+=f*e;d.j[2]+=g*c;d.j[3]=d.j[2]*p.aspectRatio/p.ia}function h(a,c,d){c=U[c].Yb[d];
return(a[c][0]+a[c][1]+a[c][2]+a[c][3])/4}function r(a,c){return(h(a,c,"here")-ta*h(a,c,"notHere"))/U[c].La}function u(){E=H.Z;var a=P[K];d.j[0]=a[0];d.j[1]=a[1];d.j[2]=a[2];d.j[3]=a[3];K=(K+1)%P.length}function x(a,c){F.label=U[v.C].label;F.distance=U[v.C].Db;F.positionScale[0]=d.j[0];F.positionScale[1]=d.j[1];F.positionScale[2]=d.j[2];F.positionScale[3]=d.j[3];F.detectScore=c;F.yaw=a}function y(a){var c=-1,d=-1E12;-1!==[H.Z,H.ra].indexOf(E)&&U.forEach(function(e,f){e=r(a,f);e>d&&(d=e,c=f)});switch(E){case H.Z:E=
H.ra;k(a,c,[1,1,1]);g=0;break;case H.ra:++g;d>w?(fa?(E=H.qa,Z=c,v.C=c,v.Ga=0):(E=H.Na,ca=0,Z=c),k(a,Z,[1,1,1])):g>q.ac?u():k(a,c,[1,1,1]);break;case H.Na:++ca;ca>q.cc&&(E=H.qa,v.n=0,v.pa=0,v.C=Z,v.M[0]=0,v.M[1]=0);k(a,Z,[1,1,1]);t(q.Xb);break;case H.qa:if(fa||++v.n>q.ka){var e=fa?r(a,v.C):v.pa/q.ka;fa||e>w+q.qc?(x(fa?Math.PI*h(a,v.C,"yaw"):Math.atan2(v.M[1],v.M[0]),e),ia?(k(a,v.C,ja),e>C?v.Ga=0:++v.Ga>q.$b&&u()):u()):u()}else k(a,v.C,[1,1,1]),t(q.xb*(q.ka-v.n)/q.ka),v.pa+=r(a,v.C),U.forEach(function(c,
d){v.C!==d&&r(a,d)>w*q.rc&&u()}),e=Math.PI*h(a,v.C,"yaw"),v.M[0]+=Math.cos(e),v.M[1]+=Math.sin(e)}}function D(){n.pb([{id:"s47",name:"_",fa:"attribute vec2 a0;uniform vec4 u35;uniform vec2 u33,u34;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);vec2 a=u33+a0*u34;vv0=u35.xy+.5*u35.zw*a;}",$:["a0"],T:[2],c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1","u35","u34","u33"],precision:"lowp"},{id:"s49",name:"_",fa:"attribute vec2 a0;uniform vec4 u35;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u35.xy+.5*u35.zw*a0;}",
$:["a0"],T:[2],c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec3 g=vec3(1.,1.,1.);float c[5];void main(){c[0]=texture2D(u1,vv0-u7*vec2(-1.,0.)).r,c[1]=texture2D(u1,vv0-u7*vec2(0.,-1.)).r,c[2]=texture2D(u1,vv0-u7).r,c[3]=texture2D(u1,vv0-u7*vec2(0.,1.)).r,c[4]=texture2D(u1,vv0-u7*vec2(1.,0.)).r;float a,b;a=min(c[0],c[1]),b=max(c[0],c[1]),c[0]=a,c[1]=b,a=min(c[0],c[2]),b=max(c[0],c[2]),c[0]=a,c[2]=b,a=min(c[0],c[3]),b=max(c[0],c[3]),c[0]=a,c[3]=b,a=min(c[0],c[4]),b=max(c[0],c[4]),c[0]=a,c[4]=b,a=min(c[1],c[2]),b=max(c[1],c[2]),c[1]=a,c[2]=b,a=min(c[1],c[3]),b=max(c[1],c[3]),c[1]=a,c[3]=b,a=min(c[1],c[4]),b=max(c[1],c[4]),c[1]=a,c[4]=b,a=min(c[2],c[3]),b=max(c[2],c[3]),c[2]=a,c[3]=b,a=min(c[2],c[4]),b=max(c[2],c[4]),c[2]=a,c[4]=b,gl_FragColor=vec4(c[2]*g,1.);}",
f:["u1","u35","u7"],precision:"lowp"},{id:"s48",name:"_",fa:"attribute vec2 a0;uniform vec2 u33,u34;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){gl_Position=vec4(a0,0.,1.);vec2 a=u33+a0*u34,b=(a+f)/2.;vv0=b;}",$:["a0"],T:[2],c:"uniform sampler2D u1;uniform vec4 u35;varying vec2 vv0;void main(){vec2 b=u35.xy-.5*u35.zw,c=u35.xy+.5*u35.zw,a=step(b,vv0)*step(vv0,c);gl_FragColor=mix(texture2D(u1,vv0),vec4(0.,1.,0.,1.),a.x*a.y*.5);}",f:["u1","u35","u34","u33"],precision:"lowp"}]);var a=[{type:"1i",
name:"u1",value:0}];n.H("s47",a);n.H("s49",a);n.H("s48",a)}function B(){p.aspectRatio=p.width/p.height;P.splice(0,P.length);p.Ea=Math.round(p.width*I.margins);p.Fa=Math.round(p.height*I.margins);p.Ka=p.width-2*p.Ea;p.Ja=p.height-2*p.Fa;var a=Math.min(p.width,p.height),c,d,e;for(c=0;c<I.nSweepSsteps;++c){var f=I.sweepScaleRange[0]+c/(I.nSweepSsteps-1)*(I.sweepScaleRange[1]-I.sweepScaleRange[0]);f*=a;var g=f/p.width;var h=g*p.aspectRatio;var k=(p.Ka-f)*(p.Ja-f);var l=Math.min(Math.floor(k/(I.sweepStepMinPx*
I.sweepStepMinPx)),I.nSweepXYsteps);l=k/l;var m=Math.round(Math.sqrt(l));var q=Math.round((p.Ka-f)/m);var r=Math.round((p.Ja-f)/m);for(e=0;e<r;++e)for(k=p.Fa+Math.round(f/2+m*e),k/=p.height,d=0;d<q;++d)l=p.Ea+Math.round(f/2+m*d),l/=p.width,P.push([l,k,g,h])}if(I.sweepShuffle)for(a=P,c=a.length-1;0<c;--c)f=Math.floor(Math.random()*(c+1)),g=a[c],a[c]=a[f],a[f]=g;else P.reverse()}function J(d){a=R.a({isLinear:!0,width:p.width,height:p.height,A:d,isPot:!1,isFlipY:!0,isFloat:!1});c=!0}function G(a,c,e){if(!a.exportData||
!a.exportData.labels)return c("INVALID_NN");"undefined"===typeof a.exportData.paramsPerLabel&&(a.exportData.paramsPerLabel={});e.paramsPerLabel&&(a.exportData.paramsPerLabel=Object.assign(a.exportData.paramsPerLabel,e.paramsPerLabel));da.reset_state();T=new Ia;T.jc(a.layers);T.lc({hb:"cpuRGBA2Float",fc:y});d.Y=R.a({isFloat:!1,isPot:!1,width:T.Mb()});Q=T.Pb();a=a.exportData;e="undefined"===typeof e?{}:e;ta="undefined"===typeof e.notHereFactor?1:e.notHereFactor;e=a.labels;var f="undefined"===typeof a.paramsPerLabel?
!1:a.paramsPerLabel,g="undefined"===typeof a.inputAspectRatio?1:a.inputAspectRatio;p.X[0]=Math.sqrt(g);p.X[1]=1/Math.sqrt(g);g!==p.ia&&(p.ia=g,B());g=Array(e.length);var h,k;for(k=0;k<Q/8;++k)for(h=0;h<Q;++h){var l=h+k*Q;if(l>=e.length)break;var m=h;var r=8*k;var t=e[l];var u=f&&f[t]&&f[t].thresholdDetect?f[t].thresholdDetect:q.La;var v=a.distances&&a.distances[l]?a.distances[l]:3;g[l]={La:u,label:t,Db:v,Yb:{here:m+r*Q,notHere:m+(r+1)*Q,yaw:m+(r+2)*Q,dx:m+(r+3)*Q,dy:m+(r+4)*Q,ds:m+(r+5)*Q}}}U=g;c(!1)}
var q={ga_:512,xa:[.05,.05,.15],hc:{margins:.1,nSweepXYsteps:36,nSweepSsteps:4,sweepScaleRange:[.3,.7],sweepStepMinPx:16,sweepShuffle:!0},kb:[1/15,.9],bc:3,ac:3,La:.68,cc:10,Xb:.015,ka:8,qc:-.02,xb:.01,Bc:.06,rc:.7,$b:20},I=Object.create(q.hc),T,S=!1,N=!1,p={aspectRatio:1,ia:1,X:[1,1],width:0,height:0,videoWidth:0,videoHeight:0,Ea:0,Fa:0,Ka:0,Ja:0,wa:"s47",J:{va:[0,0],scale:[1,1]}},P=[],K=0,d={Y:!1,j:[0,0,0,0]},H={Oa:-2,LOADING:-1,Z:0,ra:1,Na:2,qa:3},E=H.Oa,aa=-2,U,Q;var ca=g=0;var Z=-1;var v={n:0,
Ga:0,C:-1,pa:0,M:[0,0]};var O=0;var ba=c=a=e=!1,F={distance:0,label:!1,positionScale:[0,0,0,0],detectScore:0,yaw:0},w=1,C=1,fa=!1,ia=!1,ja=[2,2,2],ta=1,da={init:function(a){function c(c){a.callbackReady&&a.callbackReady(c)}if(E!==H.Oa)return c("ALREADY_INITIALIZED");E=H.LOADING;if("undefined"!==typeof a.canvas)S=a.canvas,N=!1;else if("undefined"===typeof a.canvasId)S=document.createElement("canvas"),N=!1;else{S=document.getElementById(a.canvasId);if(!S)return c("INVALID_CANVASID"),!1;N=!0}"undefined"!==
typeof a.isDebugRender&&(N=a.isDebugRender);N&&(S.style.display="block");a.scanSettings&&l(I,a.scanSettings);a.canvasSize&&(q.ga_=a.canvasSize);ba="undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope;-1!==q.ga_&&(S.width=q.ga_,S.height=q.ga_);"undefined"!==typeof a.video&&a.video?(e=a.video,O=0,p.videoWidth=e.videoWidth,p.videoHeight=e.videoHeight,f(a.videoCrop)):O=1;if(!wa.m({ba:S,width:S.width,height:S.height,debug:!1,ec:c.bind(null,"GLCONTEXT_LOST"),
premultipliedAlpha:!1})||!wa.Ub())return c("GL_INCOMPATIBLE"),!1;0===O&&(J(e),B());D();m();E=H.Z;c(!1);return!0},set_NN:function(a,c,d){if(1===aa)c&&c("NN_LOADING");else{var e=function(a){aa=0;c&&c(a)};aa=1;"string"===typeof a?ka(a,function(a){if(!a)return e("INVALID_NN");try{var c=JSON.parse(a)}catch(ha){return e("INVALID_NN")}G(c,e,d)},function(){e("NOTFOUND_NN")}):G(a,e,d)}},reset_state:function(){K=0;E=H.Z},detect:function(e,f,g){if(E===H.LOADING||0!==aa)return F;z.N();F.label=!1;"undefined"!==
typeof g&&(w=g.thresholdDetectFactor?g.thresholdDetectFactor:1,C=g.thresholdDetectFactorUnstitch?g.thresholdDetectFactorUnstitch:1,fa=g.isSkipConfirmation?!0:!1,ia=g.isKeepTracking?!0:!1,ja=g.trackingFactors?g.trackingFactors:ja);if(0===O)a.refresh();else if(1===O){if(!c){p.width=f.size.width;p.height=f.size.height;switch(g.cutShader){case "IOS":p.wa="s49";n.H("s49",[{name:"u7",type:"2f",value:[1/p.width,1/p.height]}]);break;default:p.wa="s47"}J(null);B()}a.tc(f.buffer)}e=e?e:q.bc;for(f=0;f<e;++f)d.Y.F(),
n.set(p.wa),a.b(0),n.oa("u35",d.j),L.i(!1,!1),d.Y.b(0),T.B(!1,d.Y),z.N();z.sc();N&&(b.viewport(0,0,S.width,S.height),n.set("s48"),a.b(0),n.oa("u35",d.j),L.i(!1,!1),ba&&b.commit?b.commit():b.flush());return F},get_aspectRatio:function(){return p.width/p.height},set_scanSettings:function(a){l(I,a);B()},set_videoCrop:function(a){f(a);m()}};return da}();
;if(typeof(module)!=='undefined'){module.exports=JEEARAPI;}